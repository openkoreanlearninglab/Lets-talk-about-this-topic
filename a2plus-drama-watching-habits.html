<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OpenKorean - ë“œë¼ë§ˆ: ëª°ì•„ ë³´ê¸° vs ë§¤ì£¼ ë³´ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- YouTube Iframe API: LearnViewì—ì„œ ì‚¬ìš© -->
    <script src="https://www.youtube.com/iframe_api"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <!-- í°íŠ¸ ë§í¬: IBM Plex Sans KR, Jua, Noto Sans KR, Sunflower -->
    <link href="https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+KR:wght@400;500;600;700&family=Jua&family=Noto+Sans+KR:wght@400;500;700;900&family=Sunflower:wght@300;500;700&display=swap" rel="stylesheet">
    <style>
        /* ê¸°ë³¸ ê¸€ê¼´ ì„¤ì •: IBM Plex Sans KR */
        body { font-family: 'IBM Plex Sans KR', sans-serif; background-color: #f9fafb; }
        
        /* ì‚¬ìš©ì ì§€ì • í°íŠ¸ ìœ í‹¸ë¦¬í‹° í´ë˜ìŠ¤ */
        .font-jua { font-family: 'Jua', sans-serif; }
        .font-noto { font-family: 'Noto Sans KR', sans-serif; }
        .font-sunflower { font-family: 'Sunflower', sans-serif; }
        
        /* ìŠ¤í¬ë¡¤ë°” ì»¤ìŠ¤í…€ */
        ::-webkit-scrollbar { width: 6px; height: 6px; }
        ::-webkit-scrollbar-track { background: transparent; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 3px; }
        ::-webkit-scrollbar-thumb:hover { background: #94a3b8; }

        /* ì• ë‹ˆë©”ì´ì…˜ */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        .animate-fade-in { animation: fadeIn 0.3s ease-out forwards; }

        /* Range Slider Custom Style */
        input[type=range] {
            -webkit-appearance: none;
            background: transparent;
        }
        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 16px;
            width: 16px;
            border-radius: 50%;
            background: #22c55e;
            cursor: pointer;
            margin-top: -6px;
            border: 2px solid white;
            box-shadow: 0 1px 3px rgba(0,0,0,0.2);
        }
        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            cursor: pointer;
            background: #e2e8f0;
            border-radius: 2px;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef, useMemo, useCallback } = React;
        const { createPortal } = ReactDOM;

        // --- Data: Level Definitions & Styles ---
        const LEVEL_DEFINITIONS = {
            "A1": { title: "Novice", desc: "Can use and understand very simple everyday expressions. Can introduce themselves, ask and answer basic questions (name, age, where they live, etc.)." },
            "A1+": { title: "Pre-Beginner", desc: "Still beginner, but can handle slightly more than A1: simple short conversations about familiar topics if the other person speaks slowly and clearly." },
            "A2": { title: "Beginner", desc: "Can understand frequently used sentences (family, shopping, work, hobbies). Can handle simple routine tasks and short social exchanges." },
            "A2+": { title: "Upper Beginner", desc: "Between A2 and B1. Can speak a bit more smoothly about daily life, give simple opinions, and manage short conversations with some support." },
            "B1": { title: "Pre-Intermediate", desc: "Can understand the main points of clear standard speech or texts on familiar topics (school, work, leisure). Can describe experiences, plans, and briefly explain opinions." },
            "B1+": { title: "Lower Intermediate", desc: "Stronger B1. More comfortable carrying conversations, handling some unexpected situations, and linking ideas more coherently, but still with gaps." },
            "B2": { title: "Intermediate", desc: "Can understand the main ideas of complex texts, interact quite fluently with natives, and produce clear, detailed speech and writing on many topics." },
            "B2+": { title: "Upper Intermediate", desc: "Near C1. Can argue a point logically, follow more abstract discussions, and use a wide range of vocabulary with fewer mistakes, though not fully â€œadvancedâ€." },
            "C1": { title: "Advanced", desc: "Can understand long, demanding texts and implied meanings; express ideas fluently and spontaneously; use language flexibly in academic, professional, and social settings." },
            "C1+": { title: "Upper Advanced", desc: "Very strong C1, approaching native-like flexibility. Still occasional non-native patterns, but can operate comfortably in almost all situations." },
            "C2": { title: "Proficient", desc: "Can understand virtually everything heard or read; express themselves very precisely, subtly, and naturally, even in complex, nuanced situations." }
        };

        const LEVEL_STYLES = {
            "A1": "bg-orange-50 text-orange-600 border-orange-100", 
            "A1+": "bg-orange-50 text-orange-600 border-orange-100", 
            "A2": "bg-green-50 text-green-600 border-green-100",    
            "A2+": "bg-green-50 text-green-600 border-green-100",    
            "B1": "bg-blue-50 text-blue-600 border-blue-100",      
            "B1+": "bg-blue-50 text-blue-600 border-blue-100",      
            "B2": "bg-purple-50 text-purple-600 border-purple-100", 
            "B2+": "bg-purple-50 text-purple-600 border-purple-100", 
            "C1": "bg-fuchsia-50 text-fuchsia-700 border-fuchsia-100", 
            "C1+": "bg-fuchsia-50 text-fuchsia-700 border-fuchsia-100", 
            "C2": "bg-red-50 text-red-600 border-red-100",         
        };

        // --- Icons ---
        const HomeIcon = ({ className }) => (<svg viewBox="0 0 24 24" fill="currentColor" className={className}><path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>);
        const DashboardIcon = ({ className }) => (<svg viewBox="0 0 24 24" fill="currentColor" className={className}><path d="M4 11h5V5H4v6zm0 7h5v-6H4v6zm6 0h5v-6h-5v6zm6 0h5v-6h-5v6zm-6-7h5V5h-5v6zm6-6v6h5V5h-5z"/></svg>);
        const LearnIcon = ({ className }) => (<svg viewBox="0 0 24 24" fill="currentColor" className={className}><path d="M21.582,6.186c-0.23-0.86-0.908-1.538-1.768-1.768C18.254,4,12,4,12,4S5.746,4,4.186,4.418 c-0.86,0.23-1.538,0.908-1.768,1.768C2,7.746,2,12,2,12s0,4.254,0.418,5.814c0.23,0.86,0.908,1.538,1.768,1.768 C5.746,20,12,20,12,20s6.254,0,7.814-0.418c0.861-0.23,1.538-0.908,1.768-1.768C22,16.254,22,12,22,12S22,7.746,21.582,6.186z M10,15.464V8.536L16,12L10,15.464z"/></svg>);
        const VocabIcon = ({ className }) => (<svg viewBox="0 0 24 24" fill="currentColor" className={className}><rect x="3" y="6" width="13" height="15" rx="2" transform="rotate(-8 9.5 13.5)" opacity="0.5" /><rect x="8" y="3" width="13" height="15" rx="2" transform="rotate(4 14.5 10.5)" /><circle cx="10.5" cy="6.5" r="1.2" fill="white" /></svg>);
        const QuizIcon = ({ className }) => (<svg viewBox="0 0 24 24" fill="currentColor" className={className}><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 17h-2v-2h2v2zm2.07-7.75l-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25z"/></svg>);
        const DiscussIcon = ({ className }) => (<svg viewBox="0 0 24 24" fill="currentColor" className={className}><path d="M20 2H8C6.9 2 6 2.9 6 4V16C6 17.1 6.9 18 8 18H18L22 22V4C22 2.9 21.1 2 20 2ZM19 14H9V6H19V14Z"/><path d="M4 6H2V20C2 21.1 2.9 22 4 22H18V20H4V6Z"/></svg>);
        const UserIcon = ({ className }) => (<svg viewBox="0 0 24 24" fill="currentColor" className={className}><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>);
        const QuizHeaderIcon = ({ className }) => (<svg viewBox="0 0 48 48" fill="none" className={className}><rect x="8" y="14" width="28" height="28" rx="4" stroke="#7C3AED" strokeWidth="4"/><rect x="14" y="6" width="28" height="28" rx="4" fill="#8B5CF6"/><path d="M28 14C30.2 14 32 15.8 32 18C32 20.2 30.2 22 28 22C26.8 22 26 22.8 26 24V25" stroke="white" strokeWidth="3" strokeLinecap="round"/><circle cx="26" cy="29" r="2" fill="white"/></svg>);
        const VocabHeaderIcon = ({ className }) => (<svg viewBox="0 0 48 48" fill="none" className={className} xmlns="http://www.w3.org/2000/svg"><path d="M24 10C24 10 34 11 40 10V38C34 39 24 38 24 38V10Z" fill="#43A047"/><path d="M24 10C24 10 14 11 8 10V38C14 39 24 38 24 38V10Z" fill="#2E7D32"/><path d="M12 16H20" stroke="white" strokeWidth="3" strokeLinecap="round"/><path d="M12 22H20" stroke="white" strokeWidth="3" strokeLinecap="round"/><path d="M12 28H20" stroke="white" strokeWidth="3" strokeLinecap="round"/><path d="M12 34H17" stroke="white" strokeWidth="3" strokeLinecap="round"/><path d="M28 16H36" stroke="white" strokeWidth="3" strokeLinecap="round"/><path d="M28 22H36" stroke="white" strokeWidth="3" strokeLinecap="round"/><path d="M28 28H36" stroke="white" strokeWidth="3" strokeLinecap="round"/><path d="M28 34H33" stroke="white" strokeWidth="3" strokeLinecap="round"/></svg>);
        const DiscussHeaderIcon = ({ className }) => (<svg viewBox="0 0 48 48" fill="none" className={className} xmlns="http://www.w3.org/2000/svg"><path d="M18 10H38C39.1 10 40 10.9 40 12V32C40 33.1 39.1 34 38 34H34V38L30 34H18C16.9 34 16 33.1 16 32V28" stroke="#3B82F6" strokeWidth="4" strokeLinecap="round" strokeLinejoin="round"/><path d="M8 16H28C29.1 16 30 16.9 30 18V30C30 31.1 29.1 32 28 32H16L12 36V32H8C6.9 32 6 31.1 6 30V18C6 16.9 6.9 16 8 16Z" fill="#3B82F6"/><path d="M10 22H26" stroke="white" strokeWidth="2" strokeLinecap="round" opacity="0.3"/></svg>);
        const LineIcon = ({ d, className }) => (<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round" className={className}><path d={d} /></svg>);
        const PlayIconLine = (props) => <LineIcon {...props} d="M5 3l14 9-14 9V3z" />;
        const OpenBookSolidIcon = ({ className }) => (<svg viewBox="0 0 24 24" fill="currentColor" className={className}><path d="M21 5c-1.11-.35-2.33-.5-3.5-.5-1.95 0-4.05.4-5.5 1.5-1.45-1.1-3.55-1.5-5.5-1.5S2.45 4.9 1 6v14.65c0 .25.25.5.5.5.1 0 .15-.05.25-.05C3.1 20.45 5.05 20 6.5 20c1.95 0 4.05.4 5.5 1.5 1.35-.85 3.8-1.5 5.5-1.5 1.65 0 3.35.3 4.75 1.05.1.05.15.05.25.05.25 0 .5-.25.5-.5V6c-.6-.45-1.25-.75-2-1z" /></svg>);
        const TranslateIcon = (props) => <LineIcon {...props} d="M5 8l6 6M4 14l6-6 2-3M2 5h12M7 2h1" />;
        const ChevronLeft = ({ className }) => <LineIcon d="m15 18-6-6 6-6" className={className}/>;
        const ChevronRight = ({ className }) => <LineIcon d="m9 18 6-6-6-6" className={className}/>;
        const SpeedSolidIcon = ({ className }) => (<svg viewBox="0 0 24 24" fill="currentColor" className={className}><path d="M20.38 8.57l-1.23 1.85a8 8 0 0 1-.22 7.58H5.07A8 8 0 0 1 15.58 6.85l1.85-1.23A10 10 0 0 0 3.35 19a2 2 0 0 0 1.72 1h13.85a2 2 0 0 0 1.74-1 10 10 0 0 0-.27-10.44z"/><path d="M10.59 15.41a2 2 0 0 0 2.83 0l5.66-8.49-8.49 5.66a2 2 0 0 0 0 2.83z"/></svg>);
        const SparklesIcon = ({ className }) => (<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" className={className}><path d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 00-1.423 1.423z" /></svg>);

        // --- Component: Level Badge ---
        const LevelBadge = ({ levelCode }) => {
            const [isHovered, setIsHovered] = useState(false);
            const info = LEVEL_DEFINITIONS[levelCode] || LEVEL_DEFINITIONS["A2+"];
            const getLevelStyle = (code) => {
                if (LEVEL_STYLES[code]) return LEVEL_STYLES[code];
                const base = code.substring(0, 2);
                return LEVEL_STYLES[base] || "bg-gray-50 text-gray-600 border-gray-100";
            };
            const badgeStyle = getLevelStyle(levelCode);
            return (
                <div 
                    className="relative inline-flex items-center cursor-help z-50"
                    onMouseEnter={() => setIsHovered(true)}
                    onMouseLeave={() => setIsHovered(false)}
                >
                    <span className={`px-2 py-0.5 rounded text-[10px] font-bold border uppercase tracking-wide shadow-sm font-sunflower ${badgeStyle}`}>
                        Level: {info.title}
                    </span>
                    {isHovered && (
                        <div className="absolute top-full left-0 mt-2 w-64 bg-gray-900/95 backdrop-blur text-white text-xs rounded-xl p-4 shadow-xl z-[100] animate-fade-in text-left">
                            <p className={`font-bold mb-1.5 text-sm ${badgeStyle.split(' ')[1]}`}>{levelCode} â€“ {info.title}</p>
                            <p className="opacity-90 leading-relaxed font-medium">{info.desc}</p>
                            <div className="absolute -top-1 left-4 w-2 h-2 bg-gray-900/95 rotate-45"></div>
                        </div>
                    )}
                </div>
            );
        };

        const VOCAB_DATA = [
            { "term": "ì–¼êµ´ì´ ì•ˆ ì¢‹ì•„ ë³´ì´ë‹¤", "mainDef": "To look unwell; to look like something is wrong.", "variants": ["ì–¼êµ´ì´ ì•ˆ ì¢‹ì•„ ë³´ì´ë‹¤", "ì–¼êµ´ì´ ì•ˆ ì¢‹ì•„ ë³´ì—¬ìš”"], "subDefs": [{ "subTerm": "ì–¼êµ´ì´ ì¢‹ì•„ ë³´ì´ë‹¤", "subDef": "To look healthy; to look good." }], "examples": [{ "kor": "ì˜¤ëŠ˜ ì–¼êµ´ì´ ì•ˆ ì¢‹ì•„ ë³´ì—¬ìš”. ë¬´ìŠ¨ ì¼ ìˆì–´ìš”?", "eng": "You don't look good today. Is something wrong?" }, { "kor": "ì ì„ ëª» ìì„œ ì–¼êµ´ì´ ì•ˆ ì¢‹ì•„ ë³´ì—¬ìš”.", "eng": "You look unwell because you couldn't sleep." }] },
            { "term": "<ì™•ìì˜ ê²Œì„>", "mainDef": "<Game of Princes> (A fictional title parodying 'Game of Thrones').", "variants": ["<ì™•ìì˜ ê²Œì„>"], "subDefs": [{ "subTerm": "ì™•ì", "subDef": "Prince." }], "examples": [{ "kor": "ìš”ì¦˜ <ì™•ìì˜ ê²Œì„>ì„ ë³´ê³  ìˆì–´ìš”.", "eng": "I'm watching <Game of Princes> these days." }, { "kor": " <ì™•ìì˜ ê²Œì„>ì— ë‚˜ì˜¤ëŠ” ì™•ìê°€ ë©‹ìˆì–´ìš”.", "eng": "The prince in <Game of Princes> is cool." }] },
            { "term": "ëª°ì•„ì„œ ë³´ë‹¤", "mainDef": "To binge-watch; to watch all at once.", "variants": ["ëª°ì•„ì„œ ë³´ë‹¤", "ëª°ì•„ì„œ ë´ìš”", "ëª°ì•„ì„œ ë³´ëŠ”"], "subDefs": [], "examples": [{ "kor": "ì£¼ë§ì— ë“œë¼ë§ˆë¥¼ ëª°ì•„ì„œ ë´¤ì–´ìš”.", "eng": "I binge-watched a drama over the weekend." }, { "kor": "ì €ëŠ” ì›¹íˆ°ì„ ì™„ê²°ê¹Œì§€ ê¸°ë‹¤ë ¸ë‹¤ê°€ ëª°ì•„ì„œ ë´ìš”.", "eng": "I wait until a webtoon is finished and binge-read it." }] },
            { "term": "ë™ì•ˆ", "mainDef": "During; for (a period of time).", "variants": ["ë™ì•ˆ"], "subDefs": [{ "subTerm": "24ì‹œê°„ ë™ì•ˆ", "subDef": "For 24 hours." }, { "subTerm": "ì¼ì£¼ì¼ ë™ì•ˆ", "subDef": "For one week." }, { "subTerm": "3ì¼ ë™ì•ˆ", "subDef": "For 3 days." }], "examples": [{ "kor": "ë°©í•™ ë™ì•ˆ ì—¬í–‰ì„ ê°ˆ ê±°ì˜ˆìš”.", "eng": "I'm going to travel during the vacation." }, { "kor": "1ì‹œê°„ ë™ì•ˆ ìš´ë™í–ˆì–´ìš”.", "eng": "I exercised for 1 hour." }] },
            { "term": "í•œ ë²ˆì— ë‹¤", "mainDef": "All at once; in one go.", "variants": ["í•œ ë²ˆì— ë‹¤"], "subDefs": [], "examples": [{ "kor": "ìˆ™ì œë¥¼ í•œ ë²ˆì— ë‹¤ í–ˆì–´ìš”.", "eng": "I did all my homework at once." }, { "kor": "ì•½ì„ í•œ ë²ˆì— ë‹¤ ë¨¹ìœ¼ë©´ ì•ˆ ë¼ìš”.", "eng": "You shouldn't take all the medicine at once." }] },
            { "term": "-ë¼ëŠ” ëœ»ì´ì—ìš”", "mainDef": "\"It means thatâ€¦\"", "variants": ["ë¼ëŠ” ëœ»ì´ì—ìš”"], "subDefs": [], "examples": [{ "kor": "ì´ í‘œì‹œëŠ” 'ë©ˆì¶”ì„¸ìš”'ë¼ëŠ” ëœ»ì´ì—ìš”.", "eng": "This sign means 'stop'." }, { "kor": "ê·¸ ë§ì€ ë™ì˜í•œë‹¤ëŠ” ëœ»ì´ì—ìš”.", "eng": "That expression means I agree." }] },
            { "term": "-ë©´ ë¼ìš”", "mainDef": "You just have to...; It works if...", "variants": ["ë©´ ë¼ìš”", "ìˆìœ¼ë©´ ë¼ìš”", "ìë©´ ë¼ìš”"], "subDefs": [{ "subTerm": "ì»¤í”¼â˜•ï¸ 12ì”ë§Œ ìˆìœ¼ë©´ ë¼ìš”", "subDef": "I just need 12 cups of coffee." }, { "subTerm": "íšŒì‚¬ì—ì„œ ìë©´ ë¼ìš”", "subDef": "I just have to sleep at the office." }], "examples": [{ "kor": "ì—¬ê¸°ì— ì„œëª…í•˜ë©´ ë¼ìš”.", "eng": "You just have to sign here." }, { "kor": "ëª¨ë¥´ë©´ ë¬¼ì–´ë³´ë©´ ë¼ìš”.", "eng": "If you don't know, you just have to ask." }] },
            { "term": "ë§¤ì£¼ í•œ í¸", "mainDef": "One episode every week.", "variants": ["ë§¤ì£¼ í•œ í¸"], "subDefs": [{ "subTerm": "ë§¤ì£¼", "subDef": "Every week." }, { "subTerm": "í•œ í¸", "subDef": "One episode (counter for movies/dramas)." }, { "subTerm": "ë§¤ì£¼ í•œ í¸ì”©", "subDef": "One episode each week." }], "examples": [{ "kor": "ì´ ë“œë¼ë§ˆëŠ” ë§¤ì£¼ í•œ í¸ ë‚˜ì™€ìš”.", "eng": "This drama comes out one episode every week." }, { "kor": "ì €ëŠ” ë§¤ì£¼ í•œ í¸ì”© ì˜í™”ë¥¼ ë´ìš”.", "eng": "I watch one movie each week." }] },
            { "term": "ì—í”¼ì†Œë“œ", "mainDef": "Episode.", "variants": ["ì—í”¼ì†Œë“œ"], "subDefs": [], "examples": [{ "kor": "ë‹¤ìŒ ì—í”¼ì†Œë“œê°€ ê¶ê¸ˆí•´ìš”.", "eng": "I'm curious about the next episode." }, { "kor": "ì´ ë“œë¼ë§ˆëŠ” ì—í”¼ì†Œë“œê°€ ë§ì•„ìš”.", "eng": "This drama has many episodes." }] },
            { "term": "ê¸°ë‹¤ë¦¬ë‹¤", "mainDef": "To wait.", "variants": ["ê¸°ë‹¤ë¦¬ë‹¤", "ê¸°ë‹¤ë ¤ìš”"], "subDefs": [], "examples": [{ "kor": "ì¹œêµ¬ë¥¼ 1ì‹œê°„ ê¸°ë‹¤ë ¸ì–´ìš”.", "eng": "I waited for my friend for an hour." }, { "kor": "ì¡°ê¸ˆë§Œ ê¸°ë‹¤ë ¤ ì£¼ì„¸ìš”.", "eng": "Please wait a moment." }] },
            { "term": "ê¶ê¸ˆí•´ì„œ ì ë„ ëª» ììš”", "mainDef": "I can't even sleep because I'm curious.", "variants": ["ê¶ê¸ˆí•´ì„œ ì ë„ ëª» ììš”"], "subDefs": [{ "subTerm": "-ì•„ì„œ/ì–´ì„œ", "subDef": "Used to connect clauses indicating cause or reason (\"becauseâ€¦\")." }, { "subTerm": "-ë„ ëª» í•˜ë‹¤", "subDef": "Cannot even do..." }], "examples": [{ "kor": "ê²°ê³¼ê°€ ê¶ê¸ˆí•´ì„œ ì ë„ ëª» ììš”.", "eng": "I can't sleep because I'm curious about the result." }, { "kor": "ë„ˆë¬´ ì•„íŒŒì„œ ê±·ì§€ë„ ëª»í•´ìš”.", "eng": "I can't even walk because it hurts so much." }] },
            { "term": "ê¶ê¸ˆí•˜ë‹¤", "mainDef": "To be curious.", "variants": ["ê¶ê¸ˆí•˜ë‹¤", "ê¶ê¸ˆí•´ì„œ"], "subDefs": [], "examples": [{ "kor": "ë‹¤ìŒ ì´ì•¼ê¸°ê°€ ì •ë§ ê¶ê¸ˆí•´ìš”.", "eng": "I'm really curious about the next story." }, { "kor": "ê¶ê¸ˆí•œ ê²Œ ìˆìœ¼ë©´ ë¬¼ì–´ë³´ì„¸ìš”.", "eng": "If you are curious about anything, please ask." }] },
            { "term": "ì•Œê³  ì‹¶ë‹¤", "mainDef": "To want to know.", "variants": ["ì•Œê³  ì‹¶ë‹¤", "ì•Œê³  ì‹¶ì–´ìš”"], "subDefs": [{ "subTerm": "ì•Œë‹¤", "subDef": "To know." }, { "subTerm": "-ê³  ì‹¶ë‹¤", "subDef": "\"Want toâ€¦\"; used to express desire." }], "examples": [{ "kor": "ì§„ì‹¤ì„ ì•Œê³  ì‹¶ì–´ìš”.", "eng": "I want to know the truth." }, { "kor": "ê·¸ ì‚¬ëŒ ì´ë¦„ì„ ì•Œê³  ì‹¶ì–´ìš”.", "eng": "I want to know that person's name." }] },
            { "term": "ë‚´ìš©", "mainDef": "Content; plot; story.", "variants": ["ë‚´ìš©", "ë‚´ìš©ì´"], "subDefs": [], "examples": [{ "kor": "ì´ ì±…ì˜ ë‚´ìš©ì€ ì•„ì£¼ ìŠ¬í¼ìš”.", "eng": "The content of this book is very sad." }, { "kor": "ë“œë¼ë§ˆ ë‚´ìš©ì„ ë‹¤ ìŠì–´ë²„ë ¸ì–´ìš”.", "eng": "I forgot all the plot of the drama." }] },
            { "term": "ê¸°ëŒ€í•˜ë‹¤", "mainDef": "To expect; to look forward to.", "variants": ["ê¸°ëŒ€í•˜ë‹¤", "ê¸°ëŒ€í•´"], "subDefs": [{ "subTerm": "ê¸°ëŒ€í•´ ë³´ì„¸ìš”", "subDef": "Please look forward to it." }], "examples": [{ "kor": "ë‹¤ìŒ ì‹œì¦Œì„ ê¸°ëŒ€í•˜ê³  ìˆì–´ìš”.", "eng": "I'm looking forward to the next season." }, { "kor": "ë„ˆë¬´ ë§ì´ ê¸°ëŒ€í•˜ì§€ ë§ˆì„¸ìš”.", "eng": "Don't expect too much." }] },
            { "term": "ì¼ì£¼ì¼ ì§€ë‚˜ë©´", "mainDef": "If a week passes.", "variants": ["ì¼ì£¼ì¼ ì§€ë‚˜ë©´"], "subDefs": [{ "subTerm": "ì§€ë‚˜ë‹¤", "subDef": "To pass (time)." }, { "subTerm": "-ë©´", "subDef": "\"Ifâ€¦\"; conditional particle." }], "examples": [{ "kor": "ì¼ì£¼ì¼ ì§€ë‚˜ë©´ ê´œì°®ì•„ì§ˆ ê±°ì˜ˆìš”.", "eng": "It will be okay after a week passes." }, { "kor": "ì‹œê°„ì´ ì§€ë‚˜ë©´ ì•Œ ìˆ˜ ìˆì–´ìš”.", "eng": "If time passes, you will know." }] },
            { "term": "ìŠì–´ë²„ë¦¬ë‹¤", "mainDef": "To forget.", "variants": ["ìŠì–´ë²„ë¦¬ë‹¤", "ìŠì–´ë²„ë ¤ìš”"], "subDefs": [], "examples": [{ "kor": "ë¹„ë°€ë²ˆí˜¸ë¥¼ ìŠì–´ë²„ë ¸ì–´ìš”.", "eng": "I forgot the password." }, { "kor": "ë‚˜ìœ ê¸°ì–µì€ ë¹¨ë¦¬ ìŠì–´ë²„ë¦¬ì„¸ìš”.", "eng": "Please forget bad memories quickly." }] },
            { "term": "ì ì‹œ ì‰¬ì–´ì•¼ ê¸°ì–µì„ ì˜ í•´ìš”", "mainDef": "You have to rest for a moment to remember well.", "variants": ["ì ì‹œ ì‰¬ì–´ì•¼ ê¸°ì–µì„ ì˜ í•´ìš”"], "subDefs": [{ "subTerm": "ì ì‹œ", "subDef": "For a moment; briefly." }, { "subTerm": "-ì•„ì•¼/ì–´ì•¼ - ì˜ í•˜ë‹¤", "subDef": "Must do [...] to do [...] well." }, { "subTerm": "ê¸°ì–µì„ í•˜ë‹¤", "subDef": "To remember." }], "examples": [{ "kor": "ì ì‹œ ì‰¬ì–´ì•¼ ì¼ì„ ë” ì˜ í•  ìˆ˜ ìˆì–´ìš”.", "eng": "You have to rest a bit to work better." }, { "kor": "ì—°ìŠµì„ í•´ì•¼ ë…¸ë˜ë¥¼ ì˜ í•´ìš”.", "eng": "You have to practice to sing well." }] },
            { "term": "ì–´ì œ ë³¸ ë“œë¼ë§ˆ", "mainDef": "The drama I watched yesterday.", "variants": ["ì–´ì œ ë³¸ ë“œë¼ë§ˆ"], "subDefs": [{ "subTerm": "ë³´ë‹¤", "subDef": "To watch." }, { "subTerm": "-ã„´/ì€", "subDef": "Used to turn a past-tense verb into an \"adjective-ish\" phrase that describes the following noun." }, { "subTerm": "ë“œë¼ë§ˆ", "subDef": "Drama." }], "examples": [{ "kor": "ì–´ì œ ë³¸ ë“œë¼ë§ˆê°€ ì •ë§ ì¬ë¯¸ìˆì—ˆì–´ìš”.", "eng": "The drama I watched yesterday was really fun." }, { "kor": "ì´ê²ƒì€ ë‚´ê°€ ì½ì€ ì±…ì´ì—ìš”.", "eng": "This is the book I read." }] },
            { "term": "ì£¼ì¸ê³µ", "mainDef": "Protagonist; main character.", "variants": ["ì£¼ì¸ê³µ"], "subDefs": [], "examples": [{ "kor": "ì´ ì˜í™”ì˜ ì£¼ì¸ê³µì€ ëˆ„êµ¬ì˜ˆìš”?", "eng": "Who is the main character of this movie?" }, { "kor": "ì €ëŠ” ë“œë¼ë§ˆ ì£¼ì¸ê³µì²˜ëŸ¼ ì‚´ê³  ì‹¶ì–´ìš”.", "eng": "I want to live like a drama protagonist." }] },
            { "term": "ê±° ë´ìš”", "mainDef": "See? / I told you so.", "variants": ["ê±° ë´ìš”"], "subDefs": [], "examples": [{ "kor": "ê±° ë´ìš”, ë‚´ê°€ ë§ì•˜ì£ ?", "eng": "See? I was right, wasn't I?" }, { "kor": "ê±° ë´ìš”, ë¹„ê°€ ì˜¨ë‹¤ê³  í–ˆì–ì•„ìš”.", "eng": "See? I told you it would rain." }] },
            { "term": "ê¸°ì–µ ëª» í•˜ì–ì•„ìš”", "mainDef": "You don't remember, you know.", "variants": ["ê¸°ì–µ ëª» í•˜ì–ì•„ìš”"], "subDefs": [{ "subTerm": "ê¸°ì–µí•˜ë‹¤", "subDef": "To remember." }, { "subTerm": "-ì–ì•„ìš”", "subDef": "Used to remind the listener of shared or obvious information." }], "examples": [{ "kor": "ìš°ë¦¬ëŠ” ëˆì´ ì—†ì–ì•„ìš”.", "eng": "We don't have money, you know." }, { "kor": "ë²Œì¨ ë°¥ì„ ë¨¹ì—ˆì–ì•„ìš”.", "eng": "You already ate, didn't you?" }] },
            { "term": "ì²˜ëŸ¼", "mainDef": "Like; as.", "variants": ["ì²˜ëŸ¼", "ì˜í™”ì²˜ëŸ¼"], "subDefs": [{ "subTerm": "ì˜í™”ì²˜ëŸ¼", "subDef": "Like a movie." }], "examples": [{ "kor": "ë„ˆëŠ” ì²œì‚¬ì²˜ëŸ¼ ì°©í•´ìš”.", "eng": "You are kind like an angel." }, { "kor": "ìš°ë¦¬ ê°€ì¡±ì²˜ëŸ¼ ì§€ë‚´ìš”.", "eng": "Let's live like family." }] },
            { "term": "ëª°ì…í•˜ë‹¤", "mainDef": "To be immersed; to get absorbed.", "variants": ["ëª°ì…í•˜ë‹¤", "ëª°ì…í•´ì„œ"], "subDefs": [{ "subTerm": "ëª°ì…í•´ì„œ ë³´ë‹¤", "subDef": "To watch with immersion." }], "examples": [{ "kor": "ì˜í™”ì— ë„ˆë¬´ ëª°ì…í•´ì„œ ìš¸ì—ˆì–´ìš”.", "eng": "I was so immersed in the movie that I cried." }, { "kor": "ê³µë¶€ì— ëª°ì…í•˜ë©´ ì‹œê°„ì´ ë¹¨ë¦¬ ê°€ìš”.", "eng": "If you get absorbed in studying, time flies." }] },
            { "term": "ì™„ì „íˆ", "mainDef": "Completely; fully.", "variants": ["ì™„ì „íˆ"], "subDefs": [], "examples": [{ "kor": "ë³‘ì´ ì™„ì „íˆ ë‚˜ì•˜ì–´ìš”.", "eng": "I am completely cured." }, { "kor": "ê·¸ ì‚¬ëŒì€ ì™„ì „íˆ ë‹¬ë¼ì¡Œì–´ìš”.", "eng": "That person has completely changed." }] },
            { "term": "ì§‘ì¤‘í•˜ë‹¤", "mainDef": "To concentrate; to focus.", "variants": ["ì§‘ì¤‘í•˜ë‹¤"], "subDefs": [], "examples": [{ "kor": "ìˆ˜ì—… ì‹œê°„ì— ì§‘ì¤‘í•˜ì„¸ìš”.", "eng": "Please concentrate during class." }, { "kor": "ì‹œë„ëŸ¬ì›Œì„œ ì¼ì— ì§‘ì¤‘í•  ìˆ˜ ì—†ì–´ìš”.", "eng": "I can't focus on work because it's noisy." }] },
            { "term": "-í•œí…Œ", "mainDef": "To (someone) - colloquial particle.", "variants": ["í•œí…Œ", "ì¹œêµ¬ë“¤í•œí…Œ"], "subDefs": [{ "subTerm": "ì¹œêµ¬ë“¤í•œí…Œ", "subDef": "To friends." }], "examples": [{ "kor": "ì¹œêµ¬í•œí…Œ ì„ ë¬¼ì„ ì¤¬ì–´ìš”.", "eng": "I gave a gift to my friend." }, { "kor": "ì„ ìƒë‹˜í•œí…Œ ë¬¼ì–´ë³´ì„¸ìš”.", "eng": "Please ask the teacher." }] },
            { "term": "ìŠ¤í¬ì¼ëŸ¬ ë‹¹í•˜ë‹¤", "mainDef": "To be spoiled (get a spoiler).", "variants": ["ìŠ¤í¬ì¼ëŸ¬ ë‹¹í•˜ë‹¤", "ìŠ¤í¬ì¼ëŸ¬ ë‹¹í–ˆì–´ìš”"], "subDefs": [], "examples": [{ "kor": "ì¸í„°ë„·ì—ì„œ ìŠ¤í¬ì¼ëŸ¬ ë‹¹í–ˆì–´ìš”.", "eng": "I got spoiled on the internet." }, { "kor": "ìŠ¤í¬ì¼ëŸ¬ ë‹¹í•˜ê¸° ì‹«ì–´ì„œ ë‰´ìŠ¤ë¥¼ ì•ˆ ë´ìš”.", "eng": "I don't watch the news because I don't want to get spoiled." }] },
            { "term": "ë¯¸ë¦¬", "mainDef": "In advance; beforehand.", "variants": ["ë¯¸ë¦¬"], "subDefs": [], "examples": [{ "kor": "í‘œë¥¼ ë¯¸ë¦¬ ì˜ˆë§¤í–ˆì–´ìš”.", "eng": "I booked the ticket in advance." }, { "kor": "ì˜¤ê¸° ì „ì— ë¯¸ë¦¬ ì—°ë½í•´ ì£¼ì„¸ìš”.", "eng": "Please contact me in advance before coming." }] },
            { "term": "ì™„ê²°ë˜ë‹¤", "mainDef": "To be completed; to be finished (for series).", "variants": ["ì™„ê²°ë˜ë‹¤", "ì™„ê²°ë "], "subDefs": [], "examples": [{ "kor": "ì´ ì›¹íˆ°ì€ ê³§ ì™„ê²°ë¼ìš”.", "eng": "This webtoon will be finished soon." }, { "kor": "ì™„ê²°ëœ ë“œë¼ë§ˆë§Œ ë´ìš”.", "eng": "I only watch completed dramas." }] },
            { "term": "-ã„¹/ì„ ë•Œê¹Œì§€", "mainDef": "Until...", "variants": ["ë•Œê¹Œì§€", "ì™„ê²°ë  ë•Œê¹Œì§€"], "subDefs": [{ "subTerm": "ì™„ê²°ë  ë•Œê¹Œì§€", "subDef": "Until it is completed." }], "examples": [{ "kor": "ì„±ê³µí•  ë•Œê¹Œì§€ í¬ê¸°í•˜ì§€ ë§ˆì„¸ìš”.", "eng": "Don't give up until you succeed." }, { "kor": "ì¹œêµ¬ê°€ ì˜¬ ë•Œê¹Œì§€ ê¸°ë‹¤ë¦´ ê±°ì˜ˆìš”.", "eng": "I will wait until my friend comes." }] },
            { "term": "ëë‚˜ë‹¤", "mainDef": "To end; to finish.", "variants": ["ëë‚˜ë‹¤", "ëë‚˜ìš”"], "subDefs": [], "examples": [{ "kor": "ìˆ˜ì—…ì´ ì–¸ì œ ëë‚˜ìš”?", "eng": "When does the class end?" }, { "kor": "ì˜í™”ê°€ ëë‚œ í›„ì— ë°¥ì„ ë¨¹ì—ˆì–´ìš”.", "eng": "We ate after the movie ended." }] },
            { "term": "ì¹œêµ¬ë¥¼ ë²„ë¦¬ëŠ” ì‚¬ëŒ", "mainDef": "A person who abandons their friend.", "variants": ["ì¹œêµ¬ë¥¼ ë²„ë¦¬ëŠ” ì‚¬ëŒ"], "subDefs": [{ "subTerm": "ë²„ë¦¬ë‹¤", "subDef": "To throw away; to abandon." }, { "subTerm": "-ëŠ”", "subDef": "Noun-modifying ending (present tense)." }], "examples": [{ "kor": "ì“°ë ˆê¸°ë¥¼ ì•„ë¬´ë°ë‚˜ ë²„ë¦¬ëŠ” ì‚¬ëŒì€ ë‚˜ë¹ ìš”.", "eng": "A person who throws trash anywhere is bad." }, { "kor": "ê°€ì¡±ì„ ë²„ë¦¬ëŠ” ì‚¬ëŒì€ ì—†ì–´ìš”.", "eng": "No one abandons their family." }] },
            { "term": "-ì—ê²Œ", "mainDef": "To (someone) - particle.", "variants": ["ì—ê²Œ", "ì €ì—ê²Œ"], "subDefs": [{ "subTerm": "ì €ì—ê²Œ", "subDef": "To me." }], "examples": [{ "kor": "ë¶€ëª¨ë‹˜ì—ê²Œ í¸ì§€ë¥¼ ì¼ì–´ìš”.", "eng": "I wrote a letter to my parents." }, { "kor": "ê·¸ ì±…ì„ ì €ì—ê²Œ ì£¼ì„¸ìš”.", "eng": "Please give that book to me." }] },
            { "term": "A ë³´ë‹¤ B", "mainDef": "B rather than A; B more than A.", "variants": ["ë³´ë‹¤", "ì¹œêµ¬ë³´ë‹¤ ë“œë¼ë§ˆ"], "subDefs": [{ "subTerm": "ì¹œêµ¬ë³´ë‹¤ ë“œë¼ë§ˆ", "subDef": "Drama rather than friends / Drama more than friends." }], "examples": [{ "kor": "ì €ëŠ” ì»¤í”¼ë³´ë‹¤ ì°¨ë¥¼ ë” ì¢‹ì•„í•´ìš”.", "eng": "I like tea more than coffee." }, { "kor": "ë§ë³´ë‹¤ í–‰ë™ì´ ì¤‘ìš”í•´ìš”.", "eng": "Actions are more important than words." }] },
            { "term": "ì›ë˜", "mainDef": "Originally; actually; by nature.", "variants": ["ì›ë˜"], "subDefs": [], "examples": [{ "kor": "ì›ë˜ëŠ” ì•ˆ ê°€ë ¤ê³  í–ˆì–´ìš”.", "eng": "Originally, I wasn't going to go." }, { "kor": "ê·¸ ì‚¬ëŒì€ ì›ë˜ ì°©í•´ìš”.", "eng": "That person is naturally kind." }] },
            { "term": "ì²˜ìŒë¶€í„°", "mainDef": "From the beginning.", "variants": ["ì²˜ìŒë¶€í„°"], "subDefs": [], "examples": [{ "kor": "ì²˜ìŒë¶€í„° ë‹¤ì‹œ ì‹œì‘í•´ìš”.", "eng": "Let's start over from the beginning." }, { "kor": "ì²˜ìŒë¶€í„° ëê¹Œì§€ ë‹¤ ë´¤ì–´ìš”.", "eng": "I watched it all from beginning to end." }] },
            { "term": "ì¸ìƒ", "mainDef": "Life.", "variants": ["ì¸ìƒ"], "subDefs": [], "examples": [{ "kor": "ì¸ìƒì€ ì¦ê±°ì›Œìš”.", "eng": "Life is enjoyable." }, { "kor": "ì´ê²ƒì´ ì œ ì¸ìƒ ì˜í™”ì˜ˆìš”.", "eng": "This is the movie of my life (best movie ever)." }] },
            { "term": "í˜¼ì ì‚¬ëŠ” ê±°ì˜ˆìš”", "mainDef": "You live alone / It's about living alone.", "variants": ["í˜¼ì ì‚¬ëŠ” ê±°ì˜ˆìš”"], "subDefs": [{ "subTerm": "ì‚´ë‹¤", "subDef": "To live." }, { "subTerm": "-ëŠ” ê±°ì˜ˆìš”", "subDef": "It is that... (explaining a fact)." }], "examples": [{ "kor": "ì €ëŠ” ì§€ê¸ˆ í˜¼ì ì‚´ê³  ìˆì–´ìš”.", "eng": "I am living alone right now." }, { "kor": "ì¸ìƒì€ ê²°êµ­ í˜¼ì ì‚¬ëŠ” ê±°ì˜ˆìš”.", "eng": "Life is ultimately about living alone." }] },
            { "term": "ì‹œì¦Œ", "mainDef": "Season.", "variants": ["ì‹œì¦Œ"], "subDefs": [{ "subTerm": "ë“œë¼ë§ˆ ì‹œì¦Œ", "subDef": "Drama season." }, { "subTerm": "ë§ˆì§€ë§‰ ì‹œì¦Œ", "subDef": "Final season." }], "examples": [{ "kor": "ì´ ë“œë¼ë§ˆëŠ” ì‹œì¦Œ 2ê°€ ì¬ë¯¸ìˆì–´ìš”.", "eng": "Season 2 of this drama is fun." }, { "kor": "ë‹¤ìŒ ì‹œì¦Œì„ ê¸°ë‹¤ë¦¬ê³  ìˆì–´ìš”.", "eng": "I am waiting for the next season." }] },
            { "term": "ì• í”¼ì†Œë“œê°€ 50ê°œë©´", "mainDef": "If there are 50 episodes.", "variants": ["ì• í”¼ì†Œë“œê°€ 50ê°œë©´"], "subDefs": [{ "subTerm": "ì—í”¼ì†Œë“œ *ê°œ", "subDef": "Counter for episodes." }, { "subTerm": "-ë©´", "subDef": "\"Ifâ€¦\"; conditional particle." }], "examples": [{ "kor": "ì‚¬ê³¼ê°€ 10ê°œë©´ ì¶©ë¶„í•´ìš”.", "eng": "If there are 10 apples, that's enough." }, { "kor": "ëˆì´ ë§ìœ¼ë©´ ì—¬í–‰ì„ ê°€ê³  ì‹¶ì–´ìš”.", "eng": "If I have a lot of money, I want to go on a trip." }] },
            { "term": "ëª°ì•„ë³´ê¸° ë¶€ë‹´ìŠ¤ëŸ¬ìš¸ ìˆ˜ë„ ìˆì–´ìš”", "mainDef": "It might be burdensome to binge-watch.", "variants": ["ëª°ì•„ë³´ê¸° ë¶€ë‹´ìŠ¤ëŸ¬ìš¸ ìˆ˜ë„ ìˆì–´ìš”"], "subDefs": [{ "subTerm": "ëª°ì•„ë³´ë‹¤", "subDef": "To binge-watch." }, { "subTerm": "-ê¸° ë¶€ë‹´ìŠ¤ëŸ½ë‹¤", "subDef": "To be burdensome to do (something)." }, { "subTerm": "-ã„¹/ì„ ìˆ˜ë„ ìˆë‹¤", "subDef": "\"Mightâ€¦\" or \"couldâ€¦\"; used to express possibility." }], "examples": [{ "kor": "í˜¼ì ê°€ê¸° ë¶€ë‹´ìŠ¤ëŸ¬ìš¸ ìˆ˜ë„ ìˆì–´ìš”.", "eng": "It might be uncomfortable to go alone." }, { "kor": "ê°€ê²©ì´ ë¹„ì‹¸ì„œ ë¶€ë‹´ìŠ¤ëŸ¬ìš¸ ìˆ˜ë„ ìˆì–´ìš”.", "eng": "It might be burdensome because the price is high." }] },
            { "term": "ë¶€ë‹´ìŠ¤ëŸ½ë‹¤", "mainDef": "To be burdensome; uncomfortable; pressure-inducing.", "variants": ["ë¶€ë‹´ìŠ¤ëŸ½ë‹¤", "ë¶€ë‹´ìŠ¤ëŸ¬ì›Œìš”"], "subDefs": [], "examples": [{ "kor": "ê·¸ ì‚¬ëŒì˜ ë¶€íƒì´ ì¢€ ë¶€ë‹´ìŠ¤ëŸ¬ì›Œìš”.", "eng": "That person's request is a bit burdensome." }, { "kor": "ë„ˆë¬´ ë¹„ì‹¼ ì„ ë¬¼ì€ ë¶€ë‹´ìŠ¤ëŸ¬ì›Œìš”.", "eng": "Too expensive gifts are burdensome." }] },
            { "term": "íœ´ê°€ë¥¼ ì“°ë‹¤", "mainDef": "To take a vacation; to use leave.", "variants": ["íœ´ê°€ë¥¼ ì“°ë‹¤", "íœ´ê°€ë¥¼ ì¨ìš”"], "subDefs": [{ "subTerm": "íœ´ê°€", "subDef": "Vacation; leave." }], "examples": [{ "kor": "ë‹¤ìŒ ì£¼ì— íœ´ê°€ë¥¼ ì“¸ ê±°ì˜ˆìš”.", "eng": "I'm going to take a vacation next week." }, { "kor": "ì•„íŒŒì„œ íœ´ê°€ë¥¼ ì¼ì–´ìš”.", "eng": "I took leave because I was sick." }] },
            { "term": "ì§„ì‹¬ì´ì—ìš”", "mainDef": "I'm serious; I mean it.", "variants": ["ì§„ì‹¬ì´ì—ìš”"], "subDefs": [], "examples": [{ "kor": "ì €ëŠ” ë†ë‹´ì´ ì•„ë‹ˆë¼ ì§„ì‹¬ì´ì—ìš”.", "eng": "I'm not joking, I'm serious." }, { "kor": "ë‹¹ì‹ ì„ ì‚¬ë‘í•˜ëŠ” ë§ˆìŒì€ ì§„ì‹¬ì´ì—ìš”.", "eng": "My love for you is sincere." }] },
            { "term": "ì˜¤ëŠ˜ ë°°ìš´ ë‹¨ì–´", "mainDef": "Words learned today.", "variants": ["ì˜¤ëŠ˜ ë°°ìš´ ë‹¨ì–´"], "subDefs": [{ "subTerm": "ë°°ìš°ë‹¤", "subDef": "To learn." }, { "subTerm": "-ã„´/ì€", "subDef": "Used to turn a past-tense verb into an \"adjective-ish\" phrase that describes the following noun." }, { "subTerm": "ë‹¨ì–´", "subDef": "Word; vocabulary." }], "examples": [{ "kor": "ì˜¤ëŠ˜ ë°°ìš´ ë‹¨ì–´ë¥¼ ë³µìŠµí•˜ì„¸ìš”.", "eng": "Please review the words learned today." }, { "kor": "ë°°ìš´ ë‹¨ì–´ë¥¼ ì‚¬ìš©í•´ì„œ ë¬¸ì¥ì„ ë§Œë“œì„¸ìš”.", "eng": "Make sentences using the words you learned." }] },
            { "term": "ì •ë¦¬í•´ ë´ìš”", "mainDef": "Let's summarize; Let's organize.", "variants": ["ì •ë¦¬í•´ ë´ìš”"], "subDefs": [{ "subTerm": "ì •ë¦¬í•˜ë‹¤", "subDef": "To summarize; to organize." }, { "subTerm": "-ì•„/ì–´ ë³´ë‹¤", "subDef": "\"Let's tryâ€¦\"; suggestion." }], "examples": [{ "kor": "ë°©ì„ ê¹¨ë—í•˜ê²Œ ì •ë¦¬í•´ ë´ìš”.", "eng": "Let's try organizing the room cleanly." }, { "kor": "ì˜¤ëŠ˜ íšŒì˜ ë‚´ìš©ì„ ì •ë¦¬í•´ ë´ìš”.", "eng": "Let's summarize today's meeting content." }] },
            { "term": "ì—¬ê¸°ê¹Œì§€ í• ê¹Œìš”?", "mainDef": "Shall we stop here?", "variants": ["ì—¬ê¸°ê¹Œì§€ í• ê¹Œìš”"], "subDefs": [{ "subTerm": "ì—¬ê¸°ê¹Œì§€ í•˜ë‹¤", "subDef": "To do up to here." }, { "subTerm": "-ê¹Œìš”?", "subDef": "\"Shall weâ€¦?\"; suggestion." }], "examples": [{ "kor": "ì˜¤ëŠ˜ì€ í”¼ê³¤í•˜ë‹ˆê¹Œ ì—¬ê¸°ê¹Œì§€ í• ê¹Œìš”?", "eng": "Since we are tired today, shall we stop here?" }, { "kor": "ìˆ˜ì—…ì€ ì—¬ê¸°ê¹Œì§€ í• ê¹Œìš”?", "eng": "Shall we end the class here?" }] },
            { "term": "ë†ë‹´", "mainDef": "Joke.", "variants": ["ë†ë‹´"], "subDefs": [], "examples": [{ "kor": "ê·¸ê²ƒì€ ê·¸ëƒ¥ ë†ë‹´ì´ì—ˆì–´ìš”.", "eng": "That was just a joke." }, { "kor": "ë†ë‹´ì„ ì˜ í•˜ëŠ” ì‚¬ëŒì„ ì¢‹ì•„í•´ìš”.", "eng": "I like people who are good at telling jokes." }] },
            { "term": "1í¸", "mainDef": "Episode 1; One episode.", "variants": ["1í¸"], "subDefs": [], "examples": [{ "kor": "ì˜í™” 1í¸ì´ ë” ì¬ë¯¸ìˆì–´ìš”.", "eng": "The first movie is more fun." }, { "kor": "ì˜¤ëŠ˜ ë“œë¼ë§ˆ 1í¸ì„ ë´¤ì–´ìš”.", "eng": "I watched one episode of the drama today." }] },
            { "term": "ì•Œë ¤ì£¼ì„¸ìš”", "mainDef": "Please let me know; Please tell me.", "variants": ["ì•Œë ¤ì£¼ì„¸ìš”"], "subDefs": [{ "subTerm": "ì•Œë¦¬ë‹¤", "subDef": "To inform; to tell." }, { "subTerm": "-ì•„/ì–´ ì£¼ì„¸ìš”", "subDef": "Please do (for me)." }], "examples": [{ "kor": "ë„ì°©í•˜ë©´ ì•Œë ¤ì£¼ì„¸ìš”.", "eng": "Please let me know when you arrive." }, { "kor": "ì „í™”ë²ˆí˜¸ë¥¼ ì•Œë ¤ì£¼ì„¸ìš”.", "eng": "Please tell me your phone number." }] },
            { "term": "ë“œë¼ë§ˆ ë³´ëŸ¬ ê°ˆê²Œìš”", "mainDef": "I'll go watch a drama.", "variants": ["ë“œë¼ë§ˆ ë³´ëŸ¬ ê°ˆê²Œìš”"], "subDefs": [{ "subTerm": "-ëŸ¬ ê°€ë‹¤", "subDef": "To go to do (purpose)." }, { "subTerm": "-ê²Œìš”", "subDef": "\"I willâ€¦\"; expressing intention." }], "examples": [{ "kor": "ì¹œêµ¬ë¥¼ ë§Œë‚˜ëŸ¬ ê°ˆê²Œìš”.", "eng": "I will go to meet a friend." }, { "kor": "ë°¥ ë¨¹ìœ¼ëŸ¬ ê°ˆê²Œìš”.", "eng": "I will go to eat." }] }
        ];

        const QUIZ_LIST = [
            { id: 1, parts: ["ìš°ë””ëŠ” ì–´ì œ <ì™•ìì˜ ê²Œì„>ì„ 24ì‹œê°„ ë™ì•ˆ \"", "\" ë´¤ì–´ìš”."], answer: "ëª°ì•„ì„œ", bank: ["ëª°ì•„ì„œ", "ë‚˜ëˆ ì„œ", "ì ìì½”", "ëŒ€ì¶©"], eng_parts: ["Woody ", " watched 'Game of Princes' for 24 hours yesterday."], eng_answer: "binge", eng_hint: "(ë™ì‚¬) í•œ ë²ˆì— ë‹¤ í•˜ë‹¤. (Verb) To do all at once.", eng_explanation: "Correct. 'ëª°ì•„ì„œ ë³´ë‹¤' means 'to binge-watch' (watch all at once). Woody watched it for 24 hours straight.", eng_wrongAnswerExplanations: { "ë‚˜ëˆ ì„œ": "'ë‚˜ëˆ ì„œ' means 'dividedly/separately', which is the opposite of binge-watching.", "ì ìì½”": "'ì ìì½”' means 'without saying a word/quietly'.", "ëŒ€ì¶©": "'ëŒ€ì¶©' means 'roughly/carelessly'." } },
            { id: 2, parts: ["ìœ ë‚˜ëŠ” ìš°ë””ì—ê²Œ ê±´ê°•ì„ ìœ„í•´ ë“œë¼ë§ˆë¥¼ \"", "\" í•œ í¸ì”© ë³´ë¼ê³  ì¡°ì–¸í–ˆì–´ìš”."], answer: "ë§¤ì£¼", bank: ["ë§¤ì£¼", "ë§¤ë…„", "í‰ìƒ", "ëª°ì•„ì„œ"], eng_parts: ["Yuna advised Woody to watch one episode ", " for his health."], eng_answer: "every week", eng_hint: "(ëª…ì‚¬) ì¼ì£¼ì¼ë§ˆë‹¤. (Noun) Each week.", eng_explanation: "Correct. Yuna suggested watching 'ë§¤ì£¼' (every week) instead of binge-watching.", eng_wrongAnswerExplanations: { "ë§¤ë…„": "'ë§¤ë…„' means 'every year'.", "í‰ìƒ": "'í‰ìƒ' means 'lifetime'.", "ëª°ì•„ì„œ": "'ëª°ì•„ì„œ' means 'all at once', which is what Yuna told him NOT to do." } },
            { id: 3, parts: ["ìš°ë””ëŠ” ë‹¤ìŒ ë‚´ìš©ì´ ë„ˆë¬´ \"", "\" ì ì„ ëª» ì”ë‹¤ê³  í–ˆì–´ìš”."], answer: "ê¶ê¸ˆí•´ì„œ", bank: ["ê¶ê¸ˆí•´ì„œ", "ì‹¬ì‹¬í•´ì„œ", "ì‹«ì–´ì„œ", "ë¬´ì„œì›Œì„œ"], eng_parts: ["Woody said he can't sleep because he is so \"", "\" about the next part."], eng_answer: "curious", eng_hint: "(í˜•ìš©ì‚¬) ì•Œê³  ì‹¶ë‹¤. (Adjective) Want to know.", eng_explanation: "Correct. 'ê¶ê¸ˆí•˜ë‹¤' means 'to be curious'. Woody stays awake because he wants to know what happens next.", eng_wrongAnswerExplanations: { "ì‹¬ì‹¬í•´ì„œ": "'ì‹¬ì‹¬í•´ì„œ' means 'because he is bored'.", "ì‹«ì–´ì„œ": "'ì‹«ì–´ì„œ' means 'because he dislikes it'.", "ë¬´ì„œì›Œì„œ": "'ë¬´ì„œì›Œì„œ' means 'because he is scared'." } },
            { id: 4, parts: ["ìœ ë‚˜ëŠ” ë‹¤ìŒ ë‚´ìš©ì´ ë­˜ì§€ \"", "\" ë³´ëŠ” ê²ƒë„ ì¢‹ë‹¤ê³  ë§í–ˆì–´ìš”."], answer: "ê¸°ëŒ€í•´", bank: ["ê¸°ëŒ€í•´", "í¬ê¸°í•´", "ë¬´ì‹œí•´", "ê±±ì •í•´"], eng_parts: ["Yuna said it's also good to \"", "\" what the next part will be."], eng_answer: "look forward to", eng_hint: "(ë™ì‚¬) ì¢‹ì€ ì¼ì„ ê¸°ë‹¤ë¦¬ë‹¤. (Verb) To wait for something good.", eng_explanation: "Correct. 'ê¸°ëŒ€í•˜ë‹¤' means 'to look forward to' or 'to anticipate'. Yuna suggests enjoying the anticipation.", eng_wrongAnswerExplanations: { "í¬ê¸°í•´": "'í¬ê¸°í•´' means 'give up'.", "ë¬´ì‹œí•´": "'ë¬´ì‹œí•´' means 'ignore'.", "ê±±ì •í•´": "'ê±±ì •í•´' means 'worry'." } },
            { id: 5, parts: ["ìš°ë””ëŠ” ì¼ì£¼ì¼ì´ ì§€ë‚˜ë©´ ì•ì˜ ë‚´ìš©ì„ ë‹¤ \"", "\"ë¼ê³  ë§í–ˆì–´ìš”."], answer: "ìŠì–´ë²„ë ¤ìš”", bank: ["ìŠì–´ë²„ë ¤ìš”", "ê¸°ì–µí•´ìš”", "ë§Œë“¤ì–´ìš”", "ì¢‹ì•„í•´ìš”"], eng_parts: ["Woody said that if a week passes, he \"", "\" all the previous content."], eng_answer: "forgets", eng_hint: "(ë™ì‚¬) ê¸°ì–µí•˜ì§€ ëª»í•˜ë‹¤. (Verb) To not remember.", eng_explanation: "Correct. 'ìŠì–´ë²„ë¦¬ë‹¤' means 'to forget'. Woody claims he forgets everything after a week.", eng_wrongAnswerExplanations: { "ê¸°ì–µí•´ìš”": "'ê¸°ì–µí•´ìš”' means 'remember', which is the opposite.", "ë§Œë“¤ì–´ìš”": "'ë§Œë“¤ì–´ìš”' means 'make'.", "ì¢‹ì•„í•´ìš”": "'ì¢‹ì•„í•´ìš”' means 'like'." } },
            { id: 6, parts: ["ìš°ë””ëŠ” ì˜í™”ì²˜ëŸ¼ ë“œë¼ë§ˆì— ê¹Šê²Œ \"", "\" ë³´ê³  ì‹¶ì–´ í•´ìš”."], answer: "ëª°ì…í•´ì„œ", bank: ["ëª°ì…í•´ì„œ", "ë°©í•´í•´ì„œ", "ì´ì‚¬í•´ì„œ", "ì‚¬ë‘í•´ì„œ"], eng_parts: ["Woody wants to watch dramas while deeply \"", "\" like a movie."], eng_answer: "immersed", eng_hint: "(ë™ì‚¬) ì™„ì „íˆ ì§‘ì¤‘í•˜ë‹¤. (Verb) To completely focus.", eng_explanation: "Correct. 'ëª°ì…í•˜ë‹¤' means 'to be immersed' or 'to focus deeply'. He wants the movie-like experience.", eng_wrongAnswerExplanations: { "ë°©í•´í•´ì„œ": "'ë°©í•´í•´ì„œ' means 'by disturbing/interrupting'.", "ì´ì‚¬í•´ì„œ": "'ì´ì‚¬í•´ì„œ' means 'by moving house'.", "ì‚¬ë‘í•´ì„œ": "'ì‚¬ë‘í•´ì„œ' means 'because he loves'. While he loves the show, 'ëª°ì…í•´ì„œ' describes *how* he watches." } },
            { id: 7, parts: ["ìœ ë‚˜ëŠ” ë§¤ì£¼ ë³´ì§€ ì•Šìœ¼ë©´ ì¹œêµ¬ë“¤ì—ê²Œ \"", "\"ë¥¼ ë‹¹í•  ìˆ˜ ìˆë‹¤ê³  í–ˆì–´ìš”."], answer: "ìŠ¤í¬ì¼ëŸ¬", bank: ["ìŠ¤í¬ì¼ëŸ¬", "ì¹­ì°¬", "ì„ ë¬¼", "ì´ˆëŒ€"], eng_parts: ["Yuna said if you don't watch weekly, you might get \"", "\" from friends."], eng_answer: "spoilers", eng_hint: "(ëª…ì‚¬) ë‚´ìš©ì„ ë¯¸ë¦¬ ë“£ëŠ” ê²ƒ. (Noun) Hearing the story in advance.", eng_explanation: "Correct. 'ìŠ¤í¬ì¼ëŸ¬ ë‹¹í•˜ë‹¤' means 'to get spoiled'. Friends might reveal the plot if he falls behind.", eng_wrongAnswerExplanations: { "ì¹­ì°¬": "'ì¹­ì°¬' means 'compliment'.", "ì„ ë¬¼": "'ì„ ë¬¼' means 'gift'.", "ì´ˆëŒ€": "'ì´ˆëŒ€' means 'invitation'." } },
            { id: 8, parts: ["ìœ ë‚˜ëŠ” ìš°ë”” ì”¨ê°€ \"", "\" ì¹œêµ¬ê°€ ì—†ë‹¤ê³  ë†ë‹´í–ˆì–´ìš”."], answer: "ì›ë˜", bank: ["ì›ë˜", "ê°€ë”", "ë°©ê¸ˆ", "ì•„ë§ˆë„"], eng_parts: ["Yuna joked that Woody \"", "\" has no friends."], eng_answer: "originally", eng_hint: "(ë¶€ì‚¬) ì²˜ìŒë¶€í„°. (Adverb) From the beginning/by nature.", eng_explanation: "Correct. 'ì›ë˜' means 'originally' or 'from the start'. She jokes that he didn't have friends to begin with.", eng_wrongAnswerExplanations: { "ê°€ë”": "'ê°€ë”' means 'sometimes'.", "ë°©ê¸ˆ": "'ë°©ê¸ˆ' means 'just now'.", "ì•„ë§ˆë„": "'ì•„ë§ˆë„' means 'maybe'." } },
            { id: 9, parts: ["ì—í”¼ì†Œë“œê°€ 50ê°œë‚˜ ë˜ë©´, í•œ ë²ˆì— ë³´ê¸°ê°€ \"", "\" ìˆ˜ ìˆì–´ìš”."], answer: "ë¶€ë‹´ìŠ¤ëŸ¬ìš¸", bank: ["ë¶€ë‹´ìŠ¤ëŸ¬ìš¸", "ìë‘ìŠ¤ëŸ¬ìš¸", "ì‚¬ë‘ìŠ¤ëŸ¬ìš¸", "ë¶€ë“œëŸ¬ìš¸"], eng_parts: ["If there are 50 episodes, watching them all at once can be \"", ".\""], eng_answer: "burdensome", eng_hint: "(í˜•ìš©ì‚¬) ë§ˆìŒì´ ë¬´ê²ê±°ë‚˜ ì–´ë µë‹¤. (Adjective) Feeling heavy or difficult.", eng_explanation: "Correct. 'ë¶€ë‹´ìŠ¤ëŸ½ë‹¤' means 'burdensome' or 'overwhelming'. Watching 50 episodes at once is hard.", eng_wrongAnswerExplanations: { "ìë‘ìŠ¤ëŸ¬ìš¸": "'ìë‘ìŠ¤ëŸ¬ìš¸' means 'proud'.", "ì‚¬ë‘ìŠ¤ëŸ¬ìš¸": "'ì‚¬ë‘ìŠ¤ëŸ¬ìš¸' means 'lovely'.", "ë¶€ë“œëŸ¬ìš¸": "'ë¶€ë“œëŸ¬ìš¸' means 'soft'." } },
            { id: 10, parts: ["ìš°ë””ëŠ” ë“œë¼ë§ˆë¥¼ ë‹¤ ë³´ê¸° ìœ„í•´ íšŒì‚¬ì— \"", "\"ë¥¼ ì“°ê² ë‹¤ê³  í–ˆì–´ìš”."], answer: "íœ´ê°€", bank: ["íœ´ê°€", "í¸ì§€", "ì¼ê¸°", "ëˆ"], eng_parts: ["Woody said he would submit a \"", "\" to work to watch the whole drama."], eng_answer: "leave/vacation", eng_hint: "(ëª…ì‚¬) ì¼ì„ ì‰¬ëŠ” ê²ƒ. (Noun) Taking time off work.", eng_explanation: "Correct. 'íœ´ê°€ë¥¼ ì“°ë‹¤' means 'to take a vacation/leave'. He wants to take days off to watch TV.", eng_wrongAnswerExplanations: { "í¸ì§€": "'í¸ì§€' means 'letter'.", "ì¼ê¸°": "'ì¼ê¸°' means 'diary'.", "ëˆ": "'ëˆ' means 'money'." } }
        ];

        const SCRIPT_DATA = [
            { id: 's1', speaker: 'ìœ ë‚˜', kor: 'ì•ˆë…•í•˜ì„¸ìš”! <ì´ ì£¼ì œë¡œ ì´ì•¼ê¸°í•´ ë´ìš”> íŒŸìºìŠ¤íŠ¸ì˜ˆìš”.', time: [12.600, 16.782], eng: "Hello! This is the <Let's Talk About This Topic> podcast." },
            { id: 's2', speaker: 'ìœ ë‚˜', kor: 'ì €ëŠ” ìœ ë‚˜ì˜ˆìš”.', time: [17.358, 19.155], eng: "I'm Yuna." },
            { id: 's3', speaker: 'ìš°ë””', kor: 'ì•ˆë…•í•˜ì„¸ìš”! ì €ëŠ” ìš°ë””ì˜ˆìš”.', time: [20.000, 22.319], eng: "Hello! I'm Woody." },
            { id: 's4', speaker: 'ìœ ë‚˜', kor: 'ìš°ë”” ì”¨, ë¬´ìŠ¨ ì¼ ìˆì–´ìš”?', time: [22.959, 25.054], eng: "Woody, is something wrong?" },
            { id: 's5', speaker: 'ìœ ë‚˜', kor: 'ì–¼êµ´ì´ ì•ˆ ì¢‹ì•„ ë³´ì—¬ìš”.', time: [25.130, 27.213], eng: "You don't look good." },
            { id: 's6', speaker: 'ìš°ë””', kor: 'ì–´ì œ ë°¤ì— ì ì„ ëª» ì¤ì–´ìš”!ğŸ™', time: [27.700, 29.721], eng: "I couldn't sleep last night!" },
            { id: 's7', speaker: 'ìœ ë‚˜', kor: 'ì™œìš”? ì•„íŒ ì–´ìš”? ğŸ¥º', time: [30.079, 31.693], eng: "Why? Were you sick?" },
            { id: 's8', speaker: 'ìš°ë””', kor: 'ì•„ë‹ˆìš”! <ì™•ìì˜ ê²Œì„>ì„ ëª°ì•„ì„œ ë´¤ì–´ìš”. 24ì‹œê°„ ë™ì•ˆ!ğŸ¤©', time: [32.013, 36.196], eng: "No! I binge-watched <Game of Princes>. For 24 hours!" },
            { id: 's9', speaker: 'ìš°ë””', kor: "'ëª°ì•„ì„œ ë³´ë‹¤'ëŠ” â€˜í•œ ë²ˆì— ë‹¤ ë³´ë‹¤'ë¼ëŠ” ëœ»ì´ì—ìš”.", time: [36.721, 40.539], eng: "'Binge-watch' means 'to watch all at once'." },
            { id: 's10', speaker: 'ìœ ë‚˜', kor: 'í—... 24ì‹œê°„ì´ìš”?ğŸ˜¦', time: [41.000, 43.253], eng: "Whoa... 24 hours?" },
            { id: 's11', speaker: 'ìœ ë‚˜', kor: 'ìš°ë”” ì”¨... ê·¸ëŸ¼ ì–¸ì œ ììš”?', time: [43.368, 45.775], eng: "Woody... then when do you sleep?" },
            { id: 's12', speaker: 'ìš°ë””', kor: 'ì €ëŠ” ì•ˆ ìê³  ë³¼ ìˆ˜ ìˆì–´ìš”.', time: [46.146, 48.394], eng: "I can watch without sleeping." },
            { id: 's13', speaker: 'ìš°ë””', kor: 'ì»¤í”¼â˜•ï¸ 12ì”ë§Œ ìˆìœ¼ë©´ ë¼ìš”!', time: [48.459, 50.593], eng: "I just need 12 cups of coffee!" },
            { id: 's14', speaker: 'ìœ ë‚˜', kor: 'ìš°ë”” ì”¨, ê·¸ê±´ ê±´ê°•ì— ì•ˆ ì¢‹ì•„ìš”.', time: [51.233, 54.359], eng: "Woody, that's not good for your health." },
            { id: 's15', speaker: 'ìœ ë‚˜', kor: 'ë§¤ì£¼ í•œ í¸ì”© ë³´ì„¸ìš”.', time: [54.564, 56.595], eng: "Watch one episode each week." },
            { id: 's16', speaker: 'ìœ ë‚˜', kor: "â€˜ë§¤ì£¼ í•œ í¸â€™ì€ â€˜ì¼ì£¼ì¼ì— ì—í”¼ì†Œë“œ 1ê°œâ€™ë¼ëŠ” ëœ»ì´ì—ìš”.", time: [56.799, 61.919], eng: "'One episode per week' means '1 episode a week'." },
            { id: 's17', speaker: 'ìš°ë””', kor: 'ì–´ë–»ê²Œ ë‹¤ìŒ ì£¼ë¥¼ ê¸°ë‹¤ë ¤ìš”?', time: [62.700, 64.458], eng: "How can I wait for next week?" },
            { id: 's18', speaker: 'ìš°ë””', kor: 'ì €ëŠ” ëª» í•´ìš”!', time: [64.458, 65.707], eng: "I can't do it!" },
            { id: 's19', speaker: 'ìš°ë””', kor: 'ì €ëŠ” ë‹¤ìŒ ì´ì•¼ê¸°ê°€ ê¶ê¸ˆí•´ì„œ ì ë„ ëª» ììš”.', time: [65.873, 69.420], eng: "I can't sleep because I'm curious about the next story." },
            { id: 's20', speaker: 'ìš°ë””', kor: "'ê¶ê¸ˆí•˜ë‹¤'ëŠ” 'ì•Œê³  ì‹¶ë‹¤'ë¼ëŠ” ëœ»ì´ì—ìš”.", time: [69.523, 72.993], eng: "'Curious' means 'want to know'." },
            { id: 's21', speaker: 'ìœ ë‚˜', kor: 'ì¼ì£¼ì¼ ë™ì•ˆ "ë‹¤ìŒ ë‚´ìš©ì€ ë­˜ê¹Œ?â€ ì´ë ‡ê²Œ ê¸°ëŒ€í•´ ë³´ì„¸ìš”.', time: [73.736, 79.283], eng: "Try looking forward to it for a week like \"What's next?\"" },
            { id: 's22', speaker: 'ìœ ë‚˜', kor: "'ê¸°ëŒ€í•˜ë‹¤'ëŠ” 'ì¢‹ì€ ì¼ì„ ê¸°ë‹¤ë¦¬ë‹¤â€™ë¼ëŠ” ëœ»ì´ì—ìš”.", time: [79.387, 83.716], eng: "'Look forward to' means 'waiting for something good'." },
            { id: 's23', speaker: 'ìš°ë””', kor: 'ë„¤??? ì €ëŠ” ì¼ì£¼ì¼ ì§€ë‚˜ë©´ ë‹¤ ìŠì–´ë²„ë ¤ìš”.', time: [83.908, 87.294], eng: "What??? I forget everything after a week." },
            { id: 's24', speaker: 'ìš°ë””', kor: "'ìŠì–´ë²„ë¦¬ë‹¤'ëŠ” 'ê¸°ì–µí•˜ì§€ ëª»í•˜ë‹¤â€™ë¼ëŠ” ëœ»ì´ì—ìš”.", time: [87.384, 90.947], eng: "'Forget' means 'cannot remember'." },
            { id: 's25', speaker: 'ìœ ë‚˜', kor: 'ì•„ë‹ˆì—ìš”. ë¨¸ë¦¬ë„ ì ì‹œ ì‰¬ì–´ì•¼ ê¸°ì–µì„ ì˜ í•´ìš”.', time: [91.344, 95.889], eng: "No. Your brain needs to rest to remember better." },
            { id: 's26', speaker: 'ìœ ë‚˜', kor: 'ì–´ì œ ë³¸ ë“œë¼ë§ˆì—ì„œ ì£¼ì¸ê³µ ì¹œêµ¬ì˜ ì´ë¦„ì´ ë­ì˜ˆìš”?', time: [96.055, 100.421], eng: "What is the name of the main character's friend in the drama you watched yesterday?" },
            { id: 's27', speaker: 'ìš°ë””', kor: 'ìŒ... ê·¸ê±´... ğŸ¤” ë­ì˜€ë”ë¼...', time: [100.767, 104.188], eng: "Um... that's... what was it..." },
            { id: 's28', speaker: 'ìœ ë‚˜', kor: 'ê±° ë´ìš”! ê¸°ì–µ ëª» í•˜ì–ì•„ìš”!', time: [104.508, 107.251], eng: "See! You can't remember!" },
            { id: 's29', speaker: 'ìœ ë‚˜', kor: 'ë§¤ì£¼ ë³´ë©´ ì´ì•¼ê¸°ë¥¼ ë” ì˜ ê¸°ì–µí•´ìš”.', time: [107.340, 110.588], eng: "If you watch weekly, you remember the story better." },
            { id: 's30', speaker: 'ìš°ë””', kor: 'í•˜ì§€ë§Œ, ì˜í™”ì²˜ëŸ¼ ëª°ì…í•´ì„œ ë³´ê³  ì‹¶ì–´ìš”.', time: [110.934, 114.505], eng: "But I want to watch it immersed like a movie." },
            { id: 's31', speaker: 'ìš°ë””', kor: "'ëª°ì…í•˜ë‹¤'ëŠ” â€˜ì™„ì „íˆ ì§‘ì¤‘í•˜ë‹¤â€™ë¼ëŠ” ëœ»ì´ì—ìš”.", time: [114.595, 118.567], eng: "'Immerse' means 'completely concentrate'." },
            { id: 's32', speaker: 'ìœ ë‚˜', kor: 'í•˜ì§€ë§Œ ë§¤ì£¼ ì•ˆ ë³´ë©´ ì¹œêµ¬ë“¤í•œí…Œ ìŠ¤í¬ì¼ëŸ¬ ë‹¹í•  ìˆ˜ ìˆì–´ìš”.', time: [118.759, 124.089], eng: "But if you don't watch weekly, you can get spoiled by friends." },
            { id: 's33', speaker: 'ìœ ë‚˜', kor: "'ìŠ¤í¬ì¼ëŸ¬ ë‹¹í•˜ë‹¤â€™ëŠ” â€˜ë‚´ìš©ì„ ë¯¸ë¦¬ ë“£ë‹¤â€™ë¼ëŠ” ëœ»ì´ì—ìš”.", time: [124.166, 129.313], eng: "'Get spoiled' means 'to hear the content in advance'." },
            { id: 's34', speaker: 'ìš°ë””', kor: 'ê´œì°®ì•„ìš”! ì €ëŠ” ë“œë¼ë§ˆê°€ ì™„ê²°ë  ë•Œê¹Œì§€ ì¸í„°ë„·ë„ ì•ˆ ë³´ê³ , ì¹œêµ¬ë„ ì•ˆ ë§Œë‚  ê±°ì˜ˆìš”.', time: [129.800, 136.140], eng: "It's okay! I won't check the internet or meet friends until the drama is completed." },
            { id: 's35', speaker: 'ìš°ë””', kor: "'ì™„ê²°ë˜ë‹¤â€™ëŠ” 'ì´ì•¼ê¸°ê°€ ë‹¤ ëë‚˜ë‹¤â€™ë¼ëŠ” ëœ»ì´ì—ìš”.", time: [136.297, 140.470], eng: "'Completed' means 'the story is finished'." },
            { id: 's36', speaker: 'ìœ ë‚˜', kor: 'ë“œë¼ë§ˆ ë•Œë¬¸ì— ì¹œêµ¬ë¥¼ ë²„ë¦¬ëŠ” ì‚¬ëŒì´ ì–´ë”” ìˆì–´ìš”?', time: [140.623, 144.744], eng: "Who abandons their friends because of a drama?" },
            { id: 's37', speaker: 'ìš°ë””', kor: 'ì €ì—ê²Œ ì¹œêµ¬ë³´ë‹¤ ë“œë¼ë§ˆê°€ ì¤‘ìš”í•´ìš”!', time: [144.885, 147.792], eng: "Drama is more important to me than friends!" },
            { id: 's38', speaker: 'ìœ ë‚˜', kor: 'ì•„ ë§ë‹¤, ìš°ë”” ì”¨ëŠ” ì›ë˜ ì¹œêµ¬ê°€ ì—†ì£ ! ğŸ˜†', time: [148.368, 153.610], eng: "Ah right, Woody, you originally don't have friends! ğŸ˜†" },
            { id: 's39', speaker: 'ìœ ë‚˜', kor: "â€˜ì›ë˜â€™ëŠ” â€˜ì²˜ìŒë¶€í„°â€™ë¼ëŠ” ëœ»ì´ì—ìš”.", time: [153.674, 157.131], eng: "'Originally' means 'from the beginning'." },
            { id: 's40', speaker: 'ìš°ë””', kor: 'ì›ë˜ ì¸ìƒì€ í˜¼ì ì‚¬ëŠ” ê±°ì˜ˆìš”.', time: [157.259, 160.159], eng: "Originally, life is meant to be lived alone." },
            { id: 's41', speaker: 'ìœ ë‚˜', kor: 'ê·¸ëŸ°ë° ë“œë¼ë§ˆ ì‹œì¦Œì´ ë„ˆë¬´ ê¸¸ë©´ ì–´ë–»ê²Œ í•´ìš”?', time: [160.300, 164.007], eng: "But what if the drama season is too long?" },
            { id: 's42', speaker: 'ìœ ë‚˜', kor: 'ì—í”¼ì†Œë“œê°€ 50ê°œë©´, ëª°ì•„ë³´ê¸° ë¶€ë‹´ìŠ¤ëŸ¬ìš¸ ìˆ˜ë„ ìˆì–´ìš”.', time: [164.097, 168.728], eng: "If there are 50 episodes, binge-watching can be burdensome." },
            { id: 's43', speaker: 'ìœ ë‚˜', kor: "â€˜ë¶€ë‹´ìŠ¤ëŸ½ë‹¤â€™ëŠ” â€˜ë§ˆìŒì´ ë¬´ê²ê±°ë‚˜ ì–´ë µë‹¤â€™ë¼ëŠ” ëœ»ì´ì—ìš”.", time: [168.818, 174.299], eng: "'Burdensome' means 'heart is heavy or difficult'." },
            { id: 's44', speaker: 'ìš°ë””', kor: 'ê·¸ëŸ¬ë©´ íœ´ê°€ë¥¼ ì“°ê³  3ì¼ ë™ì•ˆ ë“œë¼ë§ˆë§Œ ë³¼ ê±°ì˜ˆìš”.', time: [174.619, 178.629], eng: "Then I'll take a vacation and watch dramas for 3 days." },
            { id: 's45', speaker: 'ìœ ë‚˜', kor: 'ë„¤? ì •ë§ ë“œë¼ë§ˆ ë•Œë¬¸ì— íœ´ê°€ë¥¼ ì“¸ ê±°ì˜ˆìš”?', time: [179.090, 182.818], eng: "What? Are you really going to use vacation days for a drama?" },
            { id: 's46', speaker: 'ìš°ë””', kor: 'ë„¤, ì§„ì‹¬ì´ì—ìš”.', time: [182.868, 184.313], eng: "Yes, I'm serious." },
            { id: 's47', speaker: 'ìœ ë‚˜', kor: 'ì €ëŠ” ìš°ë”” ì”¨ë¥¼ ì´í•´í•  ìˆ˜ ì—†ì–´ìš”.', time: [184.983, 189.040], eng: "I cannot understand you, Woody." },
            { id: 's48', speaker: 'ìœ ë‚˜', kor: 'ê·¸ë˜ë„ ì˜¤ëŠ˜ ë°°ìš´ ë‹¨ì–´ë¥¼ ì •ë¦¬í•´ ë´ìš”.', time: [189.590, 193.030], eng: "Anyway, let's review the words we learned today." },
            { id: 's49', speaker: 'ìš°ë””', kor: 'â€¢ ëª°ì•„ì„œ ë³´ë‹¤: í•œ ë²ˆì— ë‹¤ ë³´ë‹¤', time: [194.457, 197.431], eng: "Binge-watch: to watch all at once" },
            { id: 's50', speaker: 'ìš°ë””', kor: 'â€¢ ë§¤ì£¼ í•œ í¸: ì¼ì£¼ì¼ì— ì—í”¼ì†Œë“œ 1ê°œ', time: [197.763, 201.566], eng: "One episode per week: 1 episode a week" },
            { id: 's51', speaker: 'ìš°ë””', kor: 'â€¢ ê¶ê¸ˆí•˜ë‹¤: ì•Œê³  ì‹¶ë‹¤', time: [202.288, 204.431], eng: "Curious: want to know" },
            { id: 's52', speaker: 'ìš°ë””', kor: 'â€¢ ê¸°ëŒ€í•˜ë‹¤: ì¢‹ì€ ì¼ì„ ê¸°ë‹¤ë¦¬ë‹¤', time: [204.789, 207.356], eng: "Look forward to: waiting for something good" },
            { id: 's53', speaker: 'ìš°ë””', kor: 'â€¢ ìŠì–´ë²„ë¦¬ë‹¤: ê¸°ì–µí•˜ì§€ ëª»í•˜ë‹¤', time: [207.599, 210.150], eng: "Forget: cannot remember" },
            { id: 's54', speaker: 'ìœ ë‚˜', kor: 'â€¢ ëª°ì…í•˜ë‹¤: ì™„ì „íˆ ì§‘ì¤‘í•˜ë‹¤', time: [210.905, 214.179], eng: "Immerse: completely concentrate" },
            { id: 's55', speaker: 'ìœ ë‚˜', kor: 'â€¢ ìŠ¤í¬ì¼ëŸ¬ ë‹¹í•˜ë‹¤: ë‚´ìš©ì„ ë¯¸ë¦¬ ë“£ë‹¤', time: [214.525, 218.256], eng: "Get spoiled: to hear the content in advance" },
            { id: 's56', speaker: 'ìœ ë‚˜', kor: 'â€¢ ì™„ê²°ë˜ë‹¤: ì´ì•¼ê¸°ê°€ ë‹¤ ëë‚˜ë‹¤', time: [218.397, 222.310], eng: "Completed: the story is finished" },
            { id: 's57', speaker: 'ìœ ë‚˜', kor: 'â€¢ ì›ë˜: ì²˜ìŒë¶€í„°', time: [222.523, 224.933], eng: "Originally: from the beginning" },
            { id: 's58', speaker: 'ìœ ë‚˜', kor: 'â€¢ ë¶€ë‹´ìŠ¤ëŸ½ë‹¤: ë§ˆìŒì´ ë¬´ê²ê±°ë‚˜ ì–´ë µë‹¤', time: [225.113, 229.436], eng: "Burdensome: heart is heavy or difficult" },
            { id: 's59', speaker: 'ìš°ë””', kor: 'ìœ ë‚˜ ì”¨, ì˜¤ëŠ˜ì€ ì—¬ê¸°ê¹Œì§€ í• ê¹Œìš”?', time: [231.000, 233.559], eng: "Yuna, shall we stop here for today?" },
            { id: 's60', speaker: 'ìš°ë””', kor: 'ì €ëŠ” ì§‘ì— ê°€ì„œâ€¦ <ì™•ìì˜ ê²Œì„> ë§ˆì§€ë§‰ ì‹œì¦Œì„ ë´ì•¼ í•´ìš”.', time: [233.659, 238.083], eng: "I have to go home... and watch the final season of <Game of Princes>." },
            { id: 's61', speaker: 'ìœ ë‚˜', kor: 'ğŸ˜‘ ìš°ë”” ì”¨... ë‚´ì¼ íšŒì‚¬ ê°€ì•¼ í•´ìš”...', time: [238.493, 242.588], eng: "Woody... you have to go to work tomorrow..." },
            { id: 's62', speaker: 'ìš°ë””', kor: 'ê´œì°®ì•„ìš”! íšŒì‚¬ì—ì„œ ìë©´ ë¼ìš”!ğŸ˜´', time: [242.870, 246.000], eng: "It's okay! I can sleep at work!" },
            { id: 's63', speaker: 'ìœ ë‚˜', kor: 'ğŸ˜‘ ìš°ë”” ì”¨â€¦', time: [246.200, 247.372], eng: "Woody..." },
            { id: 's64', speaker: 'ìš°ë””', kor: 'ë†ë‹´ì´ì—ìš”! 1í¸ë§Œ ë³¼ê²Œìš”! ğŸ˜‡', time: [247.436, 249.831], eng: "Just kidding! I'll only watch 1 episode!" },
            { id: 's65', speaker: 'ìœ ë‚˜', kor: 'ì—¬ëŸ¬ë¶„ì€ ë“œë¼ë§ˆë¥¼ ì–´ë–»ê²Œ ë´ìš”?', time: [250.791, 253.552], eng: "How do you watch dramas?" },
            { id: 's66', speaker: 'ìœ ë‚˜', kor: 'ëª°ì•„ì„œ ë´ìš”? ì•„ë‹ˆë©´ ë§¤ì£¼ í•œ í¸ì”© ë´ìš”?', time: [253.795, 257.759], eng: "Do you binge-watch? Or watch one episode a week?" },
            { id: 's67', speaker: 'ìš°ë””', kor: 'ì—¬ëŸ¬ë¶„ì˜ ìƒê°ì„ ì•Œë ¤ ì£¼ì„¸ìš”!', time: [258.194, 260.309], eng: "Please tell us your thoughts!" },
            { id: 's68', speaker: 'ìš°ë””', kor: 'ê·¸ëŸ¼ ì•ˆë…•íˆ ê³„ì„¸ìš”! ì €ëŠ” ë“œë¼ë§ˆ ë³´ëŸ¬ ê°ˆê²Œìš”! ğŸ‘‹', time: [260.398, 263.541], eng: "Then goodbye! I'm going to watch a drama!" },
            { id: 's69', speaker: 'ìœ ë‚˜', kor: 'ì•ˆë…•íˆ ê³„ì„¸ìš”! ë‹¤ìŒì— ë˜ ë§Œë‚˜ìš”!', time: [263.784, 266.910], eng: "Goodbye! See you next time!" }
        ];

        // --- DISCUSION QUESTIONS DATA ---
        const DISCUSSION_QUESTIONS = [
            { num: 1, kor: "ì—¬ëŸ¬ë¶„ì€ ì›ë˜ ë“œë¼ë§ˆë¥¼ ìì£¼ ë´ìš”? ìµœê·¼ì— ë¬´ìŠ¨ ë“œë¼ë§ˆë¥¼ ë´¤ì–´ìš”?", eng: "Do you usually watch dramas often? What drama did you watch recently?", vocab: [ { term: "ì›ë˜", meaning_eng: "Originally; Usually" }, { term: "ìµœê·¼ì—", meaning_eng: "Recently" } ] },
            { num: 2, kor: "ì—¬ëŸ¬ë¶„ì€ ë“œë¼ë§ˆë¥¼ ì–´ë–»ê²Œ ë´ìš”? ëª°ì•„ì„œ ë´ìš”? ë§¤ì£¼ í•œ í¸ì”© ë´ìš”?", eng: "How do you watch dramas? Do you binge-watch them? Or do you watch one episode each week?", vocab: [ { term: "ëª°ì•„ì„œ ë³´ë‹¤", meaning_eng: "To binge-watch; to watch all at once" }, { term: "ë§¤ì£¼ í•œ í¸ì”© ë³´ë‹¤", meaning_eng: "To watch one episode every week" } ] },
            { num: 3, kor: "ë“œë¼ë§ˆë¥¼ ë³´ê³  ë‚˜ì„œ ì¼ì£¼ì¼ì´ ì§€ë‚¬ì–´ìš”. ì—¬ëŸ¬ë¶„ì€ ë“œë¼ë§ˆ ë‚´ìš©ì„ ì˜ ê¸°ì–µí•´ìš”? ì•„ë‹ˆë©´ ë‹¤ ìŠì–´ë²„ë ¤ìš”?", eng: "A week has passed since you watched the drama. Do you remember the story well? Or do you forget everything?", vocab: [ { term: "ì§€ë‚˜ë‹¤", meaning_eng: "To pass (time)" }, { term: "ë‚´ìš©", meaning_eng: "Content; story" }, { term: "ê¸°ì–µí•˜ë‹¤", meaning_eng: "To remember" }, { term: "ìŠì–´ë²„ë¦¬ë‹¤", meaning_eng: "To forget" } ] },
            { num: 4, kor: "ìœ ë‚˜ëŠ” ì¼ì£¼ì¼ ë™ì•ˆ ë‹¤ìŒ í¸ì„ ê¸°ëŒ€í•´ ë³´ë¼ê³  í–ˆì–´ìš”. ì—¬ëŸ¬ë¶„ë„ ë‹¤ìŒ í¸ì„ ê¸°ë‹¤ë¦¬ëŠ” ë™ì•ˆ ë³´í†µ ë­í•´ìš”?", eng: "Yuna said to try looking forward to the next episode for a week. What do you usually do while waiting for the next episode?", vocab: [ { term: "ì¼ì£¼ì¼ ë™ì•ˆ", meaning_eng: "For a week" }, { term: "ë‹¤ìŒ í¸", meaning_eng: "Next episode" }, { term: "ê¸°ëŒ€í•˜ë‹¤", meaning_eng: "To look forward to; to expect" }, { term: "ê¸°ë‹¤ë¦¬ë‹¤", meaning_eng: "To wait" } ] },
            { num: 5, kor: "ìš°ë””ëŠ” ë‹¤ìŒ ì´ì•¼ê¸°ê°€ ë„ˆë¬´ ê¶ê¸ˆí•´ì„œ ì ì„ ëª» ì¤ì–´ìš”. ì—¬ëŸ¬ë¶„ë„ ê·¸ëŸ° ì ì´ ìˆì–´ìš”?", eng: "Woody couldn't sleep because he was so curious about the next story. Have you ever had that experience?", vocab: [ { term: "ê¶ê¸ˆí•˜ë‹¤", meaning_eng: "To be curious" }, { term: "ì ì„ ëª» ìë‹¤", meaning_eng: "Cannot sleep" }, { term: "ê·¸ëŸ° ì ì´ ìˆë‹¤", meaning_eng: "To have had such an experience" } ] },
            { num: 6, kor: "ì—¬ëŸ¬ë¶„ì€ 2ì‹œê°„ 30ë¶„ ì˜í™”ë¥¼ ë³¼ ë•Œ ì˜ ëª°ì…í•´ìš”? ì•„ë‹ˆë©´ 50ë¶„ ë“œë¼ë§ˆë¥¼ ë³¼ ë•Œ ì˜ ëª°ì…í•´ìš”?", eng: "Do you get immersed well when watching a 2.5-hour movie? Or do you get immersed well when watching a 50-minute drama?", vocab: [ { term: "-ã„¹/ì„ ë•Œ", meaning_eng: "When..." }, { term: "ëª°ì…í•˜ë‹¤", meaning_eng: "To be immersed; to be completely absorbed" } ] },
            { num: 7, kor: "ìš°ë””ëŠ” ë“œë¼ë§ˆê°€ ì™„ê²°ë  ë•Œê¹Œì§€ ì•ˆ ë´ìš”. ì—¬ëŸ¬ë¶„ì€ ì™„ê²°ì„ ê¸°ë‹¤ë¦´ ìˆ˜ ìˆì–´ìš”?", eng: "Woody doesn't watch until the drama is completed. Can you wait for the completion?", vocab: [ { term: "ì™„ê²°ë˜ë‹¤", meaning_eng: "To be completed; to finish" }, { term: "-ã„¹/ì„ ë•Œ", meaning_eng: "When; until" }, { term: "ê¸°ë‹¤ë¦¬ë‹¤", meaning_eng: "To wait" } ] },
            { num: 8, kor: "ë“œë¼ë§ˆì˜ ì—í”¼ì†Œë“œê°€ ë„ˆë¬´ ë§ìœ¼ë©´ ê·¸ ë“œë¼ë§ˆë¥¼ ë³´ê¸° ë¶€ë‹´ìŠ¤ëŸ¬ì›Œìš”?", eng: "If a drama has too many episodes, does it feel burdensome to watch?", vocab: [ { term: "ì—í”¼ì†Œë“œ", meaning_eng: "Episode" }, { term: "-ê¸° ë¶€ë‹´ìŠ¤ëŸ½ë‹¤", meaning_eng: "To be burdensome to (do)" } ] },
            { num: 9, kor: "ì—¬ëŸ¬ë¶„ì€ ìŠ¤í¬ì¼ëŸ¬ë¥¼ ë‹¹í•œ ì ì´ ìˆì–´ìš”? ëˆ„êµ¬í•œí…Œ ë‹¹í–ˆì–´ìš”? ê·¸ë•Œ ê¸°ë¶„ì´ ì–´ë• ì–´ìš”?", eng: "Have you ever been spoiled? Who spoiled it for you? How did you feel then?", vocab: [ { term: "ìŠ¤í¬ì¼ëŸ¬ë¥¼ ë‹¹í•˜ë‹¤", meaning_eng: "To get spoiled" }, { term: "-ã„´/ì€ ì ì´ ìˆë‹¤", meaning_eng: "To have experienced..." }, { term: "ëˆ„êµ¬í•œí…Œ", meaning_eng: "From whom; by whom" }, { term: "ê¸°ë¶„", meaning_eng: "Mood; feeling" } ] },
            { num: 10, kor: "ì—¬ëŸ¬ë¶„ë„ ìš°ë””ì²˜ëŸ¼ ë“œë¼ë§ˆ ë•Œë¬¸ì— íœ´ê°€ë¥¼ ì“°ê³  ì‹¶ì–´ìš”?", eng: "Do you also want to take a vacation because of a drama like Woody?", vocab: [ { term: "ì²˜ëŸ¼", meaning_eng: "Like..." }, { term: "íœ´ê°€ë¥¼ ì“°ë‹¤", meaning_eng: "To take a vacation" } ] }
        ];

        // --- Sidebar Component ---
        const Sidebar = ({ activeTab, setActiveTab, isCollapsed, toggleSidebar, userLevel }) => {
            const menus = [
                { id: 'home', label: 'í™ˆ', subLabel: 'Home', icon: DashboardIcon },
                { id: 'learn', label: 'ëŒ€í™” ìŠ¤í¬ë¦½íŠ¸', subLabel: 'Transcript', icon: LearnIcon },
                { id: 'vocab', label: 'í•µì‹¬ ì–´íœ˜', subLabel: 'Key Vocabulary', icon: VocabIcon },
                { id: 'quiz', label: 'ë‚´ìš© í™•ì¸ í€´ì¦ˆ', subLabel: 'Comprehension Quiz', icon: QuizIcon },
                { id: 'discuss', label: 'ìƒê°í•´ ë³´ê¸°', subLabel: 'Food For Thought', icon: DiscussIcon },
            ];
            
            const getLevelColor = (code) => {
                // If direct match exists in LEVEL_STYLES, use it. Otherwise fallback to base.
                if (LEVEL_STYLES[code]) return LEVEL_STYLES[code];
                const base = code.substring(0, 2);
                return LEVEL_STYLES[base] || "bg-gray-50 text-gray-600 border-gray-100";
            };

            const currentStyle = getLevelColor(userLevel);
            // Extract the background class (e.g., "bg-orange-50") and text class (e.g., "text-orange-600")
            const bgClass = currentStyle.split(' ')[0];
            const textClass = currentStyle.split(' ')[1];

            return (
                <aside className={`bg-white border-r border-gray-200 fixed h-full hidden md:flex flex-col z-50 transition-all duration-300 ease-in-out font-noto ${isCollapsed ? 'w-[88px]' : 'w-64'}`}>
                    <div className={`p-6 flex items-center gap-3 relative ${isCollapsed ? 'justify-center px-0' : ''}`}>
                        <img 
                            src="https://github.com/openkoreanlearninglab/Lets-talk-about-this-topic/blob/main/OpenKoreanLearningLab_Logo.jpeg?raw=true" 
                            alt="Logo" 
                            className={`rounded-2xl shadow-lg shrink-0 transition-all duration-300 object-cover ${isCollapsed ? 'w-[48px] h-[48px]' : 'w-[60px] h-[60px]'}`}
                        />
                        {!isCollapsed && (
                            <div className="animate-fade-in overflow-hidden whitespace-nowrap flex flex-col justify-center">
                                <span className="font-extrabold text-[20px] text-black leading-none font-jua">Open</span>
                                <span className={`font-bold text-[14px] leading-none font-jua ${textClass}`}>KoreanLearningLab</span>
                            </div>
                        )}
                        <button 
                            onClick={toggleSidebar}
                            className="absolute -right-3 top-1/2 -translate-y-1/2 bg-white border border-gray-200 rounded-full p-1 shadow-sm text-gray-500 hover:text-gray-700 hover:bg-gray-50 transition-colors z-10"
                        >
                            {isCollapsed ? <ChevronRight className="w-3 h-3" /> : <ChevronLeft className="w-3 h-3" />}
                        </button>
                    </div>
                    
                    <nav className={`flex-1 space-y-3 mt-4 ${isCollapsed ? 'px-3' : 'px-4'}`}>
                        {menus.map((menu) => {
                            const IconComp = menu.icon;
                            const isActive = activeTab === menu.id;
                            return (
                                <button
                                    key={menu.id}
                                    onClick={() => setActiveTab(menu.id)}
                                    className={`w-full flex items-center transition-all duration-200 group relative ${
                                        isCollapsed 
                                        ? 'justify-center h-14 rounded-2xl' 
                                        : 'gap-3 px-4 py-3 rounded-2xl'
                                    } ${
                                        isActive 
                                        ? 'bg-[#ecfdf5] text-green-600' 
                                        : 'text-gray-400 hover:bg-gray-50 hover:text-gray-600'
                                    }`}
                                >
                                    {isActive && isCollapsed && (
                                        <div className="absolute left-0 top-1/2 -translate-y-1/2 w-1.5 h-8 bg-green-500 rounded-r-lg"></div>
                                    )}
                                    {isActive && !isCollapsed && (
                                        <div className="absolute left-0 top-1/2 -translate-y-1/2 w-1 h-6 bg-green-500 rounded-r-lg"></div>
                                    )}
                                    
                                    <IconComp className={`shrink-0 transition-all duration-200 ${isCollapsed ? 'w-7 h-7' : 'w-6 h-6'} ${isActive ? 'text-green-600' : 'text-gray-400 group-hover:text-gray-50'}`} />
                                    
                                    {!isCollapsed && (
                                        <div className="flex flex-col items-start animate-fade-in overflow-hidden whitespace-nowrap">
                                            <span className="font-bold text-sm leading-none">{menu.label}</span>
                                            <span className="text-[10px] font-medium text-gray-400 mt-0.5 leading-none">{menu.subLabel}</span>
                                        </div>
                                    )}
                                    
                                    {isCollapsed && (
                                        <div className="absolute left-full ml-3 px-3 py-1.5 bg-gray-900 text-white rounded-lg opacity-0 group-hover:opacity-100 transition-opacity pointer-events-none whitespace-nowrap z-50 shadow-xl flex flex-col items-start">
                                            <span className="text-xs font-bold">{menu.label}</span>
                                            <span className="text-[10px] opacity-80">{menu.subLabel}</span>
                                            <div className="absolute top-1/2 -left-1 -translate-y-1/2 w-2 h-2 bg-gray-900 rotate-45"></div>
                                        </div>
                                    )}
                                </button>
                            );
                        })}
                    </nav>

                    <div className="p-4 border-t border-gray-100">
                        <div className={`flex items-center gap-3 p-2 rounded-xl transition-colors hover:bg-gray-50 cursor-pointer ${isCollapsed ? 'justify-center' : ''}`}>
                            <div className={`w-[44px] h-[44px] rounded-xl flex items-center justify-center shrink-0 transition-colors duration-300 ${bgClass} border ${currentStyle.split(' ')[2]}`}>
                                <span className={`text-sm font-extrabold ${textClass}`}>{userLevel}</span>
                            </div>
                            {!isCollapsed && (
                                <div className="animate-fade-in overflow-hidden whitespace-nowrap flex-1">
                                    <p className="text-sm font-extrabold text-gray-900 mb-[1px] font-sunflower">í•™ìŠµì(Learner)</p>
                                    <div className="mt-[1px]">
                                        <span className={`block w-fit px-[2px] py-0.5 rounded text-[9px] font-bold border uppercase tracking-wide shadow-sm text-left cursor-default font-sunflower ${currentStyle}`}>
                                            Level: {LEVEL_DEFINITIONS[userLevel].title}
                                        </span>
                                    </div>
                                </div>
                            )}
                        </div>
                    </div>
                </aside>
            );
        };

        // --- View Components ---

        const HomeView = ({ setActiveTab, progress, userLevel }) => {
            const completedCount = Object.values(progress).filter(val => val === true || (typeof val === 'number' && val > 0)).length;
            const percentage = Math.round((completedCount / 4) * 100);

            // í€´ì¦ˆ ì§„í–‰ë¥  í‘œì‹œ ë¡œì§
            const quizScoreDisplay = typeof progress.quiz === 'number' ? `${progress.quiz}%` : (progress.quiz ? '100%' : '0%');
            const quizColorClass = (progress.quiz === 100 || progress.quiz === true) ? 'text-green-600' : 'text-gray-900';
            const quizIconBg = (progress.quiz === 100 || progress.quiz === true) ? 'bg-green-100 text-green-600' : 'bg-purple-50 text-purple-600';

            return (
                <div className="space-y-10 animate-fade-in max-w-6xl mx-auto">
                    <div className="space-y-3">
                        <div className="flex items-center gap-2">
                            <span className="px-2 py-1 bg-green-100 text-green-700 text-[10px] font-bold rounded-md tracking-wider">NEW</span>
                            <span className="text-xs font-bold text-green-600 tracking-wide uppercase">Today's Topic</span>
                        </div>
                        <h1 className="text-4xl font-black text-gray-900 tracking-tight font-jua">ë“œë¼ë§ˆ: ëª°ì•„ ë³´ê¸° vs ë§¤ì£¼ ë³´ê¸°</h1>
                        <p className="text-gray-500 text-lg">Dramas: Binge-watching vs Weekly Viewing</p>
                    </div>

                    <div className="bg-white rounded-3xl border border-gray-100 shadow-sm overflow-hidden flex flex-col md:flex-row h-auto md:h-80">
                        <div className="md:w-5/12 relative group bg-black cursor-pointer overflow-hidden" onClick={() => setActiveTab('learn')}>
                            <img src="https://img.youtube.com/vi/61SqgIZeXRc/maxresdefault.jpg" alt="Thumbnail" className="w-full h-full object-cover opacity-80 group-hover:opacity-60 transition-opacity duration-300" />
                            <div className="absolute top-6 left-6">
                                <span className="bg-[#ea3323] text-white text-[10px] font-bold px-2 py-1 rounded border border-[#ea3323] shadow-sm tracking-wider">ON AIR</span>
                            </div>
                            <div className="absolute inset-0 flex items-center justify-center">
                                <div className="w-14 h-14 bg-white rounded-full flex items-center justify-center shadow-lg group-hover:scale-110 transition-transform duration-300">
                                    <PlayIconLine className="w-6 h-6 text-green-600 fill-current ml-1" />
                                </div>
                            </div>
                        </div>

                        <div className="md:w-7/12 p-8 md:p-10 flex flex-col justify-center">
                            <div className="flex items-center gap-2 mb-4">
                                <span className="px-2 py-1 bg-gray-100 text-gray-600 text-[10px] font-bold rounded uppercase tracking-wide">Listening</span>
                                {/* Level Badge Applied */}
                                <LevelBadge levelCode={userLevel} />
                            </div>
                            
                            <div className="mb-3">
                                <h2 className="text-2xl font-black text-gray-900">ëŒ€í™” ìŠ¤í¬ë¦½íŠ¸</h2>
                                <span className="text-sm font-bold text-gray-400">Transcript</span>
                            </div>
                            
                            <div className="text-gray-600 text-sm leading-relaxed mb-8 pr-4">
                                <p>íŒŸìºìŠ¤íŠ¸ë¥¼ ë“£ê³  ë“œë¼ë§ˆ ì‹œì²­ ìŠµê´€ì— ëŒ€í•œ ì´ì•¼ê¸°ë¥¼ ë“¤ì–´ë³´ì„¸ìš”.</p>
                                <p className="mt-1 text-gray-400 text-xs">Listen to the podcast about drama watching habits.</p>
                            </div>
                            
                            <div className="flex items-center gap-3">
                                <button 
                                    onClick={() => setActiveTab('learn')}
                                    className="px-6 py-3 bg-[#111827] text-white rounded-xl hover:bg-black transition-colors shadow-md flex flex-col items-center leading-tight"
                                >
                                    <span className="text-sm font-bold">ë™ì˜ìƒ ë³´ëŸ¬ ê°€ê¸°</span>
                                    <span className="text-[10px] opacity-70 font-medium">Watch Video</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div className="grid grid-cols-1 md:grid-cols-3 gap-6">
                        {/* Card 1: Vocabulary */}
                        <div className="bg-white p-6 rounded-3xl border border-gray-100 shadow-sm flex flex-col justify-between h-40 hover:shadow-md transition-shadow">
                            <div className="flex justify-between items-start">
                                <div>
                                    <div className="flex flex-col">
                                        <span className="text-xs font-bold text-gray-500 font-jua">í•µì‹¬ ì–´íœ˜</span>
                                        <span className="text-[10px] text-gray-400 font-medium">Key Vocabulary</span>
                                    </div>
                                    <p className="text-4xl font-black text-gray-900 mt-1">{VOCAB_DATA.length}ê°œ</p>
                                </div>
                                <div className="w-10 h-10 bg-green-50 text-green-600 rounded-xl flex items-center justify-center">
                                    <VocabIcon className="w-5 h-5" />
                                </div>
                            </div>
                            <button onClick={() => setActiveTab('vocab')} className="group flex items-center gap-1 transition-colors">
                                <div className="flex flex-col items-start">
                                    <span className="text-xs font-bold text-gray-400 group-hover:text-green-600">í•µì‹¬ ì–´íœ˜ í™•ì¸</span>
                                    <span className="text-[10px] text-gray-300 group-hover:text-green-400 font-medium">Check Vocabulary</span>
                                </div>
                                <span className="text-lg leading-none text-gray-400 group-hover:text-green-600 ml-1">â†’</span>
                            </button>
                        </div>

                        {/* Card 2: Quiz Progress */}
                        <div className="bg-white p-6 rounded-3xl border border-gray-100 shadow-sm flex flex-col justify-between h-40 hover:shadow-md transition-shadow">
                            <div className="flex justify-between items-start">
                                <div>
                                    <div className="flex flex-col">
                                        <span className="text-xs font-bold text-gray-500 font-jua">ë‚´ìš© í™•ì¸ í€´ì¦ˆ</span>
                                        <span className="text-[10px] text-gray-400 font-medium">Comprehension Quiz</span>
                                    </div>
                                    <p className={`text-4xl font-black mt-1 transition-all duration-500 ${quizColorClass}`}>
                                        {quizScoreDisplay}
                                    </p>
                                </div>
                                <div className={`w-10 h-10 rounded-xl flex items-center justify-center transition-colors ${quizIconBg}`}>
                                    <QuizIcon className="w-5 h-5" />
                                </div>
                            </div>
                            <button onClick={() => setActiveTab('quiz')} className="group flex items-center gap-1 transition-colors">
                                <div className="flex flex-col items-start">
                                    <span className="text-xs font-bold text-gray-400 group-hover:text-purple-600">í€´ì¦ˆ ì‹œì‘í•˜ê¸°</span>
                                    <span className="text-[10px] text-gray-300 group-hover:text-purple-400 font-medium">Start Quiz</span>
                                </div>
                                <span className="text-lg leading-none text-gray-400 group-hover:text-purple-600 ml-1">â†’</span>
                            </button>
                        </div>

                        {/* Card 3: Food For Thought -> Modified to Gemini AI Feedback */}
                        <div className="bg-white p-6 rounded-3xl border border-gray-100 shadow-sm flex flex-col justify-between h-40 hover:shadow-md transition-shadow">
                            <div className="flex justify-between items-start">
                                <div>
                                    <div className="flex flex-col">
                                        <span className="text-xs font-bold text-gray-500 font-jua">ìƒê°í•´ ë³´ê¸°</span>
                                        <span className="text-[10px] text-gray-400 font-medium">Food For Thought</span>
                                    </div>
                                    <div className="flex flex-col mt-3">
                                        <a 
                                            href="https://gemini.google.com/share/117cff0c1384" 
                                            target="_blank" 
                                            rel="noopener noreferrer" 
                                            className="text-xl font-black text-blue-600 hover:text-blue-800 hover:underline transition-colors block leading-tight"
                                        >
                                            Gemini AI Feedback
                                        </a>
                                    </div>
                                </div>
                                <div className="w-10 h-10 bg-blue-50 text-blue-600 rounded-xl flex items-center justify-center">
                                    <DiscussIcon className="w-5 h-5" />
                                </div>
                            </div>
                            
                            <button onClick={() => setActiveTab('discuss')} className="group flex items-center gap-1 transition-colors">
                                <div className="flex flex-col items-start">
                                    <span className="text-xs font-bold text-gray-400 group-hover:text-blue-600">ë‹¤ìŒ ì§ˆë¬¸ë“¤ì„ ìƒê°í•´ ë³´ì„¸ìš”.</span>
                                    <span className="text-[10px] text-gray-300 group-hover:text-blue-400 font-medium">Have a think about the following questions.</span>
                                </div>
                                <span className="text-lg leading-none text-gray-400 group-hover:text-blue-600 ml-1">â†’</span>
                            </button>
                        </div>
                    </div>
                </div>
            );
        };

        const LearnView = ({ updateProgress }) => {
            const [player, setPlayer] = useState(null);
            const playerRef = useRef(null); 
            const [currentTime, setCurrentTime] = useState(0);
            const [activeLine, setActiveLine] = useState(null);
            const [autoScroll, setAutoScroll] = useState(true);
            const [showVocab, setShowVocab] = useState(false);
            const [playbackRate, setPlaybackRate] = useState(1.0);
            const [translations, setTranslations] = useState({});
            const [popup, setPopup] = useState({ show: false, fixed: false, data: null, x: 0, y: 0 });
            
            // New state for vocab highlight
            const [activeVocabTerm, setActiveVocabTerm] = useState(null);
            const sidebarVocabRefs = useRef({});

            const scriptRefs = useRef({});
            const intervalRef = useRef(null);

            useEffect(() => {
                const loadVideo = () => {
                    if (window.YT && window.YT.Player) {
                        new window.YT.Player('youtube-player', {
                            videoId: '61SqgIZeXRc',
                            width: '100%',
                            height: '100%',
                            playerVars: { 'autoplay': 0, 'controls': 1, 'rel': 0 },
                            events: {
                                'onReady': (event) => {
                                    playerRef.current = event.target;
                                    setPlayer(event.target);
                                },
                                'onStateChange': (event) => {
                                    if (event.data === window.YT.PlayerState.PLAYING) {
                                        startInterval();
                                        updateProgress('learn');
                                    } else stopInterval();
                                }
                            }
                        });
                    }
                };
                if (!window.YT) {
                    const tag = document.createElement('script');
                    tag.src = "https://www.youtube.com/iframe_api";
                    const firstScriptTag = document.getElementsByTagName('script')[0];
                    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);
                    window.onYouTubeIframeAPIReady = loadVideo;
                } else {
                    loadVideo();
                }
                return () => stopInterval();
            }, []);

            useEffect(() => {
                const handleGlobalClick = () => {
                    if (popup.fixed) {
                        setPopup(prev => ({ ...prev, show: false, fixed: false }));
                    }
                };
                if (popup.fixed) {
                    window.addEventListener('click', handleGlobalClick);
                }
                return () => window.removeEventListener('click', handleGlobalClick);
            }, [popup.fixed]);

            const startInterval = () => {
                stopInterval();
                intervalRef.current = setInterval(() => {
                    const p = playerRef.current;
                    if (p && p.getCurrentTime) {
                        const time = p.getCurrentTime();
                        setCurrentTime(time);
                        const currentLine = SCRIPT_DATA.find(line => time >= line.time[0] && time < line.time[1]);
                        if (currentLine) setActiveLine(currentLine.id);
                    }
                }, 200);
            };
            const stopInterval = () => clearInterval(intervalRef.current);

            const handleSpeedChange = (e) => {
                const rate = parseFloat(e.target.value);
                setPlaybackRate(rate);
                if (player && player.setPlaybackRate) player.setPlaybackRate(rate);
            };

            useEffect(() => {
                if (popup.show) return;
                if (activeLine && autoScroll && scriptRefs.current[activeLine]) {
                    scriptRefs.current[activeLine].scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            }, [activeLine, autoScroll, popup.show]);

            const handleLineClick = (time) => {
                if (player) {
                    player.seekTo(time);
                    player.playVideo();
                }
            };

            const toggleTranslation = (id) => {
                setTranslations(prev => ({...prev, [id]: !prev[id]}));
            };

            const scrollToVocab = (term) => {
                const element = sidebarVocabRefs.current[term];
                if (element) {
                    element.scrollIntoView({ behavior: 'smooth', block: 'center' });
                }
            };

            const handleVocabEnter = (e, wordData) => {
                if (popup.fixed) return; 
                const rect = e.target.getBoundingClientRect();
                setPopup({
                    show: true,
                    fixed: false, // í˜¸ë²„ ì‹œì—ëŠ” fixed: false (ê°„ë‹¨íˆ ë³´ì´ê¸°)
                    data: wordData,
                    x: rect.left + rect.width / 2, 
                    y: rect.bottom
                });

                // Scroll sidebar if open
                if (showVocab) {
                    setActiveVocabTerm(wordData.term);
                    scrollToVocab(wordData.term);
                }
            };

            const handleVocabLeave = () => {
                if (popup.fixed) return;
                setPopup(prev => ({ ...prev, show: false }));
            };

            const handleVocabClick = (e, wordData) => {
                e.stopPropagation(); 
                // Popup logic
                if (popup.fixed && popup.data && popup.data.term === wordData.term) {
                    setPopup(prev => ({ ...prev, show: false, fixed: false }));
                    return;
                }
                const rect = e.target.getBoundingClientRect();
                setPopup({
                    show: true,
                    fixed: true, // í´ë¦­ ì‹œì—ëŠ” fixed: true (ìì„¸íˆ ë³´ì´ê¸°)
                    data: wordData,
                    x: rect.left + rect.width / 2,
                    y: rect.bottom
                });

                // Sidebar logic
                if (!showVocab) {
                   // Do NOT open sidebar. Only show popup.
                } else {
                    setActiveVocabTerm(wordData.term);
                    scrollToVocab(wordData.term);
                }
            };

            const renderTextWithVocab = (text) => {
                let parts = [text];
                VOCAB_DATA.forEach(vocab => {
                    const nextParts = [];
                    parts.forEach(part => {
                        if (typeof part === 'string') {
                            const split = part.split(vocab.term);
                            split.forEach((s, i) => {
                                if (s) nextParts.push(s);
                                if (i < split.length - 1) {
                                    nextParts.push({ isVocab: true, ...vocab });
                                }
                            });
                        } else {
                            nextParts.push(part);
                        }
                    });
                    parts = nextParts;
                });

                return parts.map((part, index) => {
                    if (typeof part === 'string') return part;
                    const isActive = (popup.show && popup.data && popup.data.term === part.term) || (showVocab && activeVocabTerm === part.term);
                    return (
                        <span 
                            key={index}
                            className={`cursor-pointer border-b-2 transition-all duration-200 font-bold inline-block leading-tight
                                ${isActive 
                                    ? 'text-green-700 border-green-500 bg-green-100 rounded-sm px-0.5 mx-0.5' 
                                    : 'text-gray-900 border-dashed border-gray-400 hover:text-green-600 hover:border-green-400 hover:bg-green-50'
                                }`}
                            onMouseEnter={(e) => handleVocabEnter(e, part)}
                            onMouseLeave={handleVocabLeave}
                            onClick={(e) => handleVocabClick(e, part)}
                        >
                            {part.term}
                        </span>
                    );
                });
            };

            return (
                <div className="flex h-[calc(100vh-4rem)] gap-4 animate-fade-in overflow-hidden relative">
                    {/* Vocab Popup */}
                    {popup.show && popup.data && createPortal(
                        <div 
                            className="fixed z-[9999] bg-white rounded-xl shadow-xl border border-gray-200 p-4 w-72 animate-fade-in pointer-events-none"
                            style={{ 
                                left: popup.x, 
                                top: popup.y + 12,
                                transform: 'translate(-50%, 0)'
                            }}
                        >
                            <div className="flex items-center justify-between mb-2">
                                <h3 className="text-lg font-black text-gray-900">{popup.data.term}</h3>
                            </div>
                            <p className="text-sm text-gray-700 font-medium mb-3 leading-snug">{popup.data.mainDef}</p>
                            
                            {/* ì˜ˆë¬¸ ëŒ€ì‹  ê´€ë ¨ í‘œí˜„(subTerms) í‘œì‹œ: í´ë¦­ ì‹œ(fixed=true)ì—ë§Œ ë³´ì„ */}
                            {popup.fixed && popup.data.subDefs && popup.data.subDefs.length > 0 && (
                                <div className="space-y-1 mt-2">
                                    {popup.data.subDefs.map((sub, idx) => (
                                        <div key={idx} className="bg-blue-50 rounded-lg p-2 border border-blue-100">
                                            <p className="text-xs text-blue-900 font-bold">{sub.subTerm}</p>
                                            <p className="text-[10px] text-blue-700">{sub.subDef}</p>
                                        </div>
                                    ))}
                                </div>
                            )}
                            
                            <div className="absolute top-0 left-1/2 -translate-x-1/2 -translate-y-1/2 w-3 h-3 bg-white border-l border-t border-gray-200 rotate-45"></div>
                        </div>,
                        document.body
                    )}

                    <div className={`bg-black rounded-xl overflow-hidden shadow-lg transition-all duration-300 ${showVocab ? 'w-5/12' : 'flex-1'}`}>
                           <div id="youtube-player" className="w-full h-full"></div>
                    </div>

                    <div className={`flex flex-col bg-white rounded-xl border border-gray-200 shadow-sm transition-all duration-300 ${showVocab ? 'w-4/12' : 'w-5/12'}`}>
                        {/* --- Controls Header (Modified for Responsive Layout) --- */}
                        <div className="flex flex-col xl:flex-row items-center justify-between p-3 border-b border-gray-100 bg-white rounded-t-xl z-10 gap-3 xl:gap-0">
                            {/* Speed Control Group */}
                            <div className="w-full xl:w-auto flex items-center justify-between gap-2 px-3 py-2 bg-white border border-gray-200 rounded-xl shadow-sm">
                                <div className="flex items-center gap-1.5 text-gray-600 shrink-0">
                                    <SpeedSolidIcon className="w-5 h-5 text-gray-500" />
                                    <span className="text-sm font-extrabold text-gray-600">Speed</span>
                                </div>
                                <div className="flex items-center gap-2 flex-1 xl:flex-none justify-center px-2">
                                    <span className="text-[10px] font-medium text-gray-400">0.5x</span>
                                    <input 
                                        type="range" min="0.5" max="1.0" step="0.01" 
                                        value={playbackRate} onChange={handleSpeedChange}
                                        className="flex-1 xl:w-32 h-1.5 bg-gray-100 rounded-lg appearance-none cursor-pointer"
                                    />
                                    <span className="text-[10px] font-medium text-gray-400">1.0x</span>
                                </div>
                                <div className="bg-[#ecfdf5] px-2 py-1 rounded-md min-w-[3rem] text-center border border-green-100 shrink-0">
                                    <span className="text-xs font-bold text-green-700">{playbackRate.toFixed(2)}x</span>
                                </div>
                            </div>

                            {/* Right Group: Auto Scroll & Vocabulary */}
                            <div className="w-full xl:w-auto flex items-center justify-between xl:justify-end gap-3">
                                <div className="flex items-center gap-2 cursor-pointer group" onClick={() => setAutoScroll(!autoScroll)}>
                                    <div className={`w-9 h-5 rounded-full relative transition-colors duration-200 ease-in-out ${autoScroll ? 'bg-green-500' : 'bg-gray-300'}`}>
                                        <div className={`absolute top-1 w-3 h-3 bg-white rounded-full shadow-sm transition-transform duration-200 ${autoScroll ? 'left-5' : 'left-1'}`}></div>
                                    </div>
                                    <span className="text-sm font-bold text-gray-600 group-hover:text-gray-800 transition-colors whitespace-nowrap">Auto Scroll</span>
                                </div>

                                <button 
                                    onClick={() => setShowVocab(!showVocab)}
                                    className={`flex items-center gap-2 px-3 py-1.5 rounded-lg border transition-all shadow-sm ${showVocab ? 'bg-gray-100 border-gray-300' : 'bg-white border-gray-300 hover:bg-gray-50'}`}
                                >
                                    <OpenBookSolidIcon className="w-4 h-4 text-gray-600" />
                                    <span className="text-sm font-bold text-gray-700 whitespace-nowrap">Vocabulary</span>
                                </button>
                            </div>
                        </div>

                        <div className="flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50">
                            {SCRIPT_DATA.map(line => {
                                const isActive = activeLine === line.id;
                                return (
                                    <div key={line.id} ref={el => scriptRefs.current[line.id] = el} className="flex flex-col">
                                        <div className="flex items-center gap-2 mb-1 ml-1">
                                            <span className="text-xs font-bold text-gray-600">{line.speaker}</span>
                                            <button onClick={(e) => { e.stopPropagation(); handleLineClick(line.time[0]); }} className="text-[10px] text-blue-500 hover:underline flex items-center gap-0.5">
                                                <PlayIconLine className="w-3 h-3 fill-current" /> ì¬ìƒ (Play)
                                            </button>
                                        </div>
                                        <div 
                                            onClick={() => handleLineClick(line.time[0])}
                                            className={`p-5 rounded-2xl border transition-all duration-300 cursor-pointer relative group ${
                                                isActive 
                                                ? 'bg-yellow-100 border-yellow-400 shadow-md ring-1 ring-yellow-200 scale-[1.01]' 
                                                : 'bg-white border-gray-200 hover:border-gray-300'
                                            }`}
                                        >
                                            <p className="text-lg text-gray-800 leading-relaxed font-medium">
                                                {renderTextWithVocab(line.kor)}
                                            </p>
                                            
                                            <div className="my-3 border-t border-dashed border-gray-200"></div>
                                            {translations[line.id] ? (
                                                <p className="text-sm text-gray-500 animate-fade-in">{line.eng}</p>
                                            ) : (
                                                <button 
                                                    onClick={(e) => { e.stopPropagation(); toggleTranslation(line.id); }}
                                                    className="text-xs text-gray-400 hover:text-gray-600 flex items-center gap-1"
                                                >
                                                    <TranslateIcon className="w-3 h-3" /> ë²ˆì—­ (Translation)
                                                </button>
                                            )}
                                            {translations[line.id] && (
                                                <button 
                                                    onClick={(e) => { e.stopPropagation(); toggleTranslation(line.id); }}
                                                    className="absolute bottom-4 right-4 text-[10px] text-gray-300 hover:text-gray-500"
                                                >
                                                    ì ‘ê¸°
                                                </button>
                                            )}
                                        </div>
                                    </div>
                                );
                            })}
                            <div className="h-32"></div>
                        </div>
                    </div>

                    {showVocab && (
                        <div className="w-3/12 flex flex-col bg-white rounded-xl border border-gray-200 shadow-sm animate-fade-in">
                            <div className="p-4 border-b border-gray-100 flex items-center gap-2 bg-white rounded-t-xl">
                                <VocabIcon className="w-5 h-5 text-green-600" />
                                <div className="flex flex-col leading-none">
                                    <h2 className="font-bold text-gray-900 text-sm font-jua">í•µì‹¬ ì–´íœ˜</h2>
                                    <span className="text-[10px] text-gray-400 font-medium">Key Vocabulary</span>
                                </div>
                            </div>
                            <div className="flex-1 overflow-y-auto p-4 space-y-4 bg-gray-50">
                                {VOCAB_DATA.map((word, idx) => (
                                    <div 
                                        key={idx} 
                                        ref={el => sidebarVocabRefs.current[word.term] = el}
                                        className={`p-4 rounded-xl border transition-all duration-500 ${
                                            activeVocabTerm === word.term 
                                            ? 'border-green-500 bg-green-50 ring-2 ring-green-200 shadow-md scale-105' 
                                            : 'bg-white border-gray-200 shadow-sm'
                                        }`}
                                    >
                                        <div className="flex justify-between items-start mb-2">
                                            <h3 className="text-lg font-extrabold text-gray-900">{word.term}</h3>
                                        </div>
                                        <p className="text-sm text-gray-600 mb-3 font-medium">{word.mainDef}</p>
                                        
                                        {/* ì˜ˆë¬¸ ëŒ€ì‹  ê´€ë ¨ í‘œí˜„(subDefs) í‘œì‹œë¡œ ë³€ê²½ */}
                                        {word.subDefs && word.subDefs.length > 0 && (
                                            <div className="space-y-2 bg-blue-50 p-2.5 rounded-lg border border-blue-100">
                                                {word.subDefs.map((sub, i) => (
                                                    <div key={i}>
                                                        <p className="text-xs text-blue-900 font-bold leading-snug">{sub.subTerm.replace('â€¢ ', '')}</p>
                                                        <p className="text-[10px] text-blue-700">{sub.subDef}</p>
                                                    </div>
                                                ))}
                                            </div>
                                        )}
                                    </div>
                                ))}
                            </div>
                        </div>
                    )}
                </div>
            );
        };

        // ìƒˆë¡œ ì¶”ê°€ëœ VocabCard ì»´í¬ë„ŒíŠ¸
        const VocabCard = ({ word }) => {
            const [isOpen, setIsOpen] = useState(false);

            return (
                <div className="bg-white p-6 rounded-2xl border border-gray-200 shadow-sm hover:shadow-md transition-all h-full flex flex-col">
                    <div className="flex justify-between mb-4">
                        <h3 className="text-2xl font-extrabold text-gray-900">{word.term}</h3>
                    </div>
                    <div className="pl-4 border-l-4 border-green-500 mb-6">
                        <p className="text-lg text-gray-600 font-medium">{word.mainDef}</p>
                    </div>
                    
                    <div className="flex-1 flex flex-col">
                        <button 
                            onClick={() => setIsOpen(!isOpen)}
                            className="w-full flex items-center justify-between p-4 bg-gray-50 hover:bg-gray-100 rounded-xl transition-all group border border-transparent hover:border-gray-200"
                        >
                            <div className="flex items-center gap-2">
                                <span className={`w-1.5 h-1.5 rounded-full transition-colors duration-300 ${isOpen ? 'bg-green-500' : 'bg-gray-400'}`}></span>
                                <span className={`text-xs font-bold uppercase tracking-wider transition-colors duration-300 ${isOpen ? 'text-green-700' : 'text-gray-500'}`}>
                                    Examples (ì˜ˆë¬¸)
                                </span>
                            </div>
                            <ChevronRight className={`w-4 h-4 text-gray-400 transition-transform duration-300 ${isOpen ? 'rotate-90' : ''}`} />
                        </button>

                        <div 
                            className={`overflow-hidden transition-all duration-300 ease-in-out ${isOpen ? 'max-h-96 opacity-100 mt-2' : 'max-h-0 opacity-0'}`}
                        >
                            <div className="bg-gray-50 rounded-xl p-4 space-y-3 border border-gray-100">
                                {word.examples.map((ex, i) => (
                                    <div key={i}>
                                        <p className="font-bold text-gray-800 text-sm leading-relaxed">{ex.kor}</p>
                                        <p className="text-gray-500 text-xs mt-0.5">{ex.eng}</p>
                                    </div>
                                ))}
                            </div>
                        </div>

                        {word.subDefs && word.subDefs.length > 0 && (
                            <div className="bg-blue-50 rounded-xl p-5 space-y-2 border border-blue-100 mt-4">
                                <h4 className="font-bold text-blue-800 text-xs mb-2 flex items-center gap-2 uppercase tracking-wider">
                                    <span className="w-1.5 h-1.5 rounded-full bg-blue-400"></span>
                                    Related & Grammar
                                </h4>
                                {word.subDefs.map((sub, i) => (
                                    <div key={i} className="flex flex-col">
                                        <span className="font-bold text-blue-900 text-sm">{sub.subTerm.replace('â€¢ ', '')}</span>
                                        <span className="text-xs text-blue-600">{sub.subDef}</span>
                                    </div>
                                ))}
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const VocabView = ({ updateProgress }) => {
            useEffect(() => {
                updateProgress('vocab');
            }, []);

            return (
            <div className="max-w-5xl animate-fade-in mx-auto">
                <div className="flex items-center gap-4 mb-8">
                    <div className="w-16 h-16 bg-[#DCFCE7] rounded-2xl flex items-center justify-center shrink-0">
                        <VocabHeaderIcon className="w-10 h-10" />
                    </div>
                    <div className="flex flex-col">
                        <h2 className="text-3xl font-black text-gray-900 font-jua">í•µì‹¬ ì–´íœ˜</h2>
                        <span className="text-base text-gray-500 font-medium">Key Vocabulary</span>
                    </div>
                </div>
                
                <div className="grid grid-cols-1 md:grid-cols-2 gap-6">
                    {VOCAB_DATA.map((word, idx) => (
                        <VocabCard key={idx} word={word} />
                    ))}
                </div>
            </div>
            );
        };
        
        // --- QUIZ COMPONENT LOGIC ---
        const QuizView = ({ updateProgress }) => {
            const [currentQuestionIndex, setCurrentQuestionIndex] = useState(0);
            const [answers, setAnswers] = useState({});
            const [firstAttempts, setFirstAttempts] = useState({}); // { 0: true, 1: false, ... }
            const [showHint, setShowHint] = useState(false);
            const [showTranslation, setShowTranslation] = useState(false);
            const [isFinished, setIsFinished] = useState(false);
            const [currentAttempt, setCurrentAttempt] = useState({}); // { 0: 1, 1: 3, ... }

            const currentQuestion = QUIZ_LIST[currentQuestionIndex];
            const selectedAnswer = answers[currentQuestionIndex] || null; // ì„ íƒëœ ë‹µë³€ í…ìŠ¤íŠ¸
            const isCorrect = selectedAnswer === currentQuestion.answer;
            const isCurrentQuestionAnswered = !!selectedAnswer; // ë‹µë³€ì„ ì‹œë„í•œ ì ì´ ìˆëŠ”ê°€?
            const isAnsweredCorrectly = answers[currentQuestionIndex] === currentQuestion.answer; // í˜„ì¬ ì •ë‹µì„ ë§í˜”ëŠ”ê°€?

            // ì„ íƒëœ ë‹µë³€ì— ëŒ€í•œ í”¼ë“œë°± ë©”ì‹œì§€ ì°¾ê¸°
            const getFeedback = (selected) => {
                if (selected === currentQuestion.answer) {
                    return {
                        message: currentQuestion.eng_explanation,
                        isCorrect: true
                    };
                } else {
                    const wrongExplanation = currentQuestion.eng_wrongAnswerExplanations[selected] || "This is not the correct answer for this context. Please try again.";
                    return {
                        message: wrongExplanation,
                        isCorrect: false
                    };
                }
            };
            
            const selectedFeedback = isCurrentQuestionAnswered ? getFeedback(selectedAnswer) : null;

            const handleOptionClick = (option) => {
                if (isAnsweredCorrectly) return; // ì´ë¯¸ ì •ë‹µì„ ë§í˜”ë‹¤ë©´ ì‹œë„ ë¶ˆê°€

                const isFirstAttempt = firstAttempts[currentQuestionIndex] === undefined;
                
                // ì²« ì‹œë„ ê¸°ë¡: ì •ë‹µ ì—¬ë¶€ë¥¼ ê¸°ë¡ (ì •ë‹µë¥  ì¸¡ì •ì— ì‚¬ìš©)
                if (isFirstAttempt) {
                    setFirstAttempts(prev => ({
                        ...prev,
                        [currentQuestionIndex]: option === currentQuestion.answer
                    }));
                }
                
                // ì‹œë„ íšŸìˆ˜ ì—…ë°ì´íŠ¸
                setCurrentAttempt(prev => ({
                    ...prev,
                    [currentQuestionIndex]: (prev[currentQuestionIndex] || 0) + 1
                }));

                // ë‹µë³€ ê¸°ë¡
                setAnswers(prev => ({
                    ...prev,
                    [currentQuestionIndex]: option
                }));
                setShowHint(false); 
            };

            const handlePrev = () => {
                if (currentQuestionIndex > 0) {
                    setCurrentQuestionIndex(prev => prev - 1);
                    setShowHint(false);
                    setShowTranslation(false);
                }
            };

            const handleNext = () => {
                if (!isAnsweredCorrectly) return; // ì •ë‹µì„ ë§íŒ ê²½ìš°ì—ë§Œ ë‹¤ìŒìœ¼ë¡œ ì´ë™

                if (currentQuestionIndex < QUIZ_LIST.length - 1) {
                    setCurrentQuestionIndex(prev => prev + 1);
                    setShowHint(false);
                    setShowTranslation(false);
                } else {
                    finishQuiz();
                }
            };

            const finishQuiz = () => {
                setIsFinished(true);
                const totalQuestions = QUIZ_LIST.length;
                // ì²« ì‹œë„ê°€ trueì¸ ê²½ìš°ë§Œ ì¹´ìš´íŠ¸
                const correctCount = Object.values(firstAttempts).filter(isCorrect => isCorrect === true).length; 
                const finalScore = Math.round((correctCount / totalQuestions) * 100);
                updateProgress('quiz', finalScore);
            };

            const handleRetry = () => {
                setCurrentQuestionIndex(0);
                setAnswers({});
                setFirstAttempts({});
                setCurrentAttempt({});
                setIsFinished(false);
                updateProgress('quiz', 0); 
            };
            
            if (isFinished) {
                const totalQuestions = QUIZ_LIST.length;
                const correctCount = Object.values(firstAttempts).filter(isCorrect => isCorrect === true).length;
                const finalScore = Math.round((correctCount / totalQuestions) * 100);
                
                return (
                    <div className="max-w-4xl animate-fade-in mx-auto text-center py-10">
                        <div className="bg-white rounded-3xl border border-gray-200 shadow-sm p-10">
                            <div className="w-20 h-20 bg-purple-100 text-purple-600 rounded-full flex items-center justify-center mx-auto mb-6">
                                <QuizIcon className="w-10 h-10" />
                            </div>
                            <h2 className="text-3xl font-black text-gray-900 mb-2">í€´ì¦ˆ ì™„ë£Œ!</h2>
                            <p className="text-gray-500 mb-8">
                                **ì´ {totalQuestions}ë¬¸ì œ ì¤‘ {correctCount}ë¬¸ì œ**ë¥¼ ì²« ì‹œë„ì— ë§í˜”ìŠµë‹ˆë‹¤.
                            </p>
                            <div className="text-5xl font-black text-purple-600 mb-10">
                                {finalScore}%
                            </div>
                            <button 
                                onClick={handleRetry}
                                className="px-8 py-3 rounded-xl bg-purple-600 text-white font-bold hover:bg-purple-700 transition-colors shadow-md"
                            >
                                ë‹¤ì‹œ í’€ê¸° (Try Again)
                            </button>
                        </div>
                    </div>
                );
            }

            return (
                <div className="max-w-4xl animate-fade-in mx-auto">
                    <div className="flex items-center gap-4 mb-6">
                        <div className="w-16 h-16 bg-purple-100 rounded-2xl flex items-center justify-center shrink-0">
                            <QuizHeaderIcon className="w-10 h-10" />
                        </div>
                        <div className="flex flex-col">
                            <h2 className="text-3xl font-black text-gray-900 font-jua">ë‚´ìš© í™•ì¸ í€´ì¦ˆ</h2>
                            <span className="text-base text-gray-500 font-medium">Comprehension Quiz ({currentQuestionIndex + 1}/{QUIZ_LIST.length})</span>
                        </div>
                    </div>

                    <div className="mb-6 p-4 bg-gray-50 rounded-xl border border-gray-200">
                        <p className="font-bold text-gray-800">ë‹¤ìŒ ë¹ˆì¹¸ì— ì•Œë§ì€ ë§ì„ ê³ ë¥´ì„¸ìš”.</p>
                        <p className="text-gray-500 text-sm">Choose the correct word for the blank.</p>
                    </div>

                    <div className="bg-white rounded-2xl border border-gray-200 shadow-sm p-2">
                        <div className="flex items-start gap-3 p-4">
                            <span className="bg-purple-100 text-purple-700 font-black rounded-lg px-2 py-1 text-sm shrink-0">Q{currentQuestion.id}</span>
                            <div className="flex flex-col">
                                <h3 className="font-bold text-gray-900 text-lg leading-snug">
                                    {/* í•œêµ­ì–´ í€´ì¦ˆ ë¬¸ì¥ */}
                                    <span className="text-xl font-bold text-gray-900">{currentQuestion.parts[0]}</span>
                                    <div className={`px-4 py-1 rounded-md font-bold text-xl transition-all duration-300 min-w-[80px] inline-block text-center border-b-2 mx-2 
                                        ${isCurrentQuestionAnswered
                                            ? (isAnsweredCorrectly
                                                ? 'bg-[#dcfce7] text-green-700 border-green-500'
                                                : 'bg-[#fee2e2] text-red-700 border-red-500')
                                            : (showHint ? 'bg-[#fef08a] text-yellow-800 border-yellow-400' : 'bg-[#fef08a] text-transparent border-yellow-400 select-none')
                                        }`}
                                    >
                                        {isCurrentQuestionAnswered
                                            ? selectedAnswer
                                            : (showHint ? `[ ${currentQuestion.answer} ]` : "___")
                                        }
                                    </div>
                                    <span className="text-xl font-bold text-gray-900">{currentQuestion.parts[1]}</span>
                                    {isCurrentQuestionAnswered && (
                                        <span className={`ml-2 text-lg ${isAnsweredCorrectly ? 'text-green-600' : 'text-red-600'}`}>
                                            {isAnsweredCorrectly ? 'âœ“' : 'âœ—'}
                                        </span>
                                    )}
                                </h3>
                                
                                {/* ì˜ì–´ ë²ˆì—­ (ìˆ¨ê²¨ì§„ ìƒíƒœ) */}
                                {showTranslation && (
                                    <p className="text-gray-500 font-medium text-sm mt-3 animate-fade-in">
                                        {currentQuestion.eng_parts[0]} **({currentQuestion.eng_answer})** {currentQuestion.eng_parts[1]}
                                    </p>
                                )}
                            </div>
                        </div>

                        {/* íŒíŠ¸ ë° ë²ˆì—­ ë²„íŠ¼ */}
                        <div className="flex gap-2 mb-4 px-6 pt-2">
                            <button 
                                onClick={() => { setShowHint(!showHint); }}
                                disabled={isAnsweredCorrectly}
                                className={`px-3 py-1.5 rounded-lg text-xs font-bold transition-colors ${isAnsweredCorrectly ? 'opacity-50 cursor-not-allowed bg-gray-100 text-gray-400' : (showHint ? 'bg-yellow-200 text-yellow-800 ring-2 ring-yellow-400' : 'bg-[#fef08a] text-yellow-800 hover:bg-yellow-200')}`}
                            >
                                íŒíŠ¸ (Hint)
                            </button>
                            <button 
                                onClick={() => setShowTranslation(!showTranslation)}
                                className={`px-3 py-1.5 rounded-lg text-xs font-bold transition-colors ${showTranslation ? 'bg-gray-300 text-gray-800 ring-2 ring-gray-400' : 'bg-gray-200 text-gray-600 hover:bg-gray-300'}`}
                            >
                                ë²ˆì—­ (Translation)
                            </button>
                            {showHint && !isAnsweredCorrectly && (
                                <span className="text-xs text-yellow-700 font-medium self-center animate-fade-in pl-3">
                                    {currentQuestion.eng_hint}
                                </span>
                            )}
                        </div>
                        
                        {/* ë³´ê¸° ì˜µì…˜ */}
                        <div className="grid grid-cols-2 md:grid-cols-4 gap-3 mb-4 px-2">
                            {currentQuestion.bank.map((option, idx) => {
                                const isSelected = selectedAnswer === option;
                                let btnClass = "bg-white border-gray-200 text-gray-700 hover:bg-gray-50 hover:border-gray-300";
                                let isCorrectOption = option === currentQuestion.answer;
                                
                                if (isAnsweredCorrectly) {
                                    if (isCorrectOption) {
                                        // ì •ë‹µì„ ë§í˜”ì„ ë•Œ ì •ë‹µ ì˜µì…˜ì„ ê°•ì¡°
                                        btnClass = "bg-green-500 border-green-600 text-white shadow-md ring-2 ring-green-200 cursor-default";
                                    } else {
                                        // ì •ë‹µ ì™¸ ì˜µì…˜ì€ ë¹„í™œì„±í™”
                                        btnClass = "bg-gray-50 border-gray-200 text-gray-400 cursor-default opacity-60";
                                    }
                                } else if (isCurrentQuestionAnswered) {
                                    if (isSelected) {
                                        // ì˜¤ë‹µ ì„ íƒ ì‹œ ë¹¨ê°„ìƒ‰ ê°•ì¡°
                                        btnClass = "bg-red-500 border-red-600 text-white shadow-md ring-2 ring-red-200";
                                    } else {
                                        // ë‹¤ë¥¸ ì˜µì…˜ë“¤ì€ ê³„ì† ì„ íƒ ê°€ëŠ¥
                                        btnClass = "bg-white border-gray-200 text-gray-700 hover:bg-gray-50 hover:border-gray-300";
                                    }
                                }
                                // ì„ íƒëœ ìƒíƒœê°€ ì•„ë‹ˆë¼ë©´, ì²« ì‹œë„ê°€ ìˆì—ˆëŠ”ì§€ ì—¬ë¶€ì™€ ê´€ê³„ì—†ì´ í´ë¦­ ê°€ëŠ¥í•´ì•¼ í•¨
                                
                                return (
                                    <button
                                        key={idx}
                                        onClick={() => handleOptionClick(option)}
                                        disabled={isAnsweredCorrectly} // ì •ë‹µì„ ë§íŒ ê²½ìš°ë§Œ ë¹„í™œì„±í™”
                                        className={`py-3 px-4 rounded-xl border font-bold text-base transition-all duration-200 ${btnClass}`}
                                    >
                                        {option}
                                    </button>
                                );
                            })}
                        </div>

                        {/* í”¼ë“œë°± ë©”ì‹œì§€ */}
                        {isCurrentQuestionAnswered && selectedFeedback && (
                            <div className="p-4 rounded-xl border-l-4 mb-4 mx-2 animate-fade-in transition-all bg-[#f8fafc] border-gray-300">
                                <div className={`mt-4 rounded-xl p-6 border animate-fade-in ${selectedFeedback.isCorrect ? 'bg-green-50 border-green-200' : 'bg-red-50 border-red-200'}`}>
                                    <h4 className={`font-bold text-sm mb-1 ${selectedFeedback.isCorrect ? 'text-green-800' : 'text-red-800'}`}>
                                        {selectedFeedback.isCorrect ? 'Correct! ğŸ‰' : 'Try again. ğŸ˜¢'}
                                    </h4>
                                    <p className={`text-sm italic ${selectedFeedback.isCorrect ? 'text-green-700' : 'text-red-700'}`}>
                                        {selectedFeedback.message}
                                    </p>
                                </div>
                            </div>
                        )}

                        <div className="flex justify-between items-center mt-4 border-t border-gray-100 pt-4 px-2 pb-2">
                            <button
                                onClick={handlePrev}
                                disabled={currentQuestionIndex === 0}
                                className={`px-6 py-1 rounded-xl font-bold flex items-center gap-2 transition-colors ${
                                    currentQuestionIndex === 0 
                                    ? 'text-gray-300 cursor-not-allowed' 
                                    : 'text-gray-600 hover:bg-gray-100'
                                }`}
                            >
                                <span className="text-lg">â†</span>
                                <span className="text-xs">ì´ì „ ë¬¸ì œ (Prev)</span>
                            </button>

                            <button 
                                onClick={handleNext}
                                disabled={!isAnsweredCorrectly} // ì •ë‹µì„ ë§íŒ ê²½ìš°ì—ë§Œ ë‹¤ìŒìœ¼ë¡œ ì´ë™ ê°€ëŠ¥
                                className={`px-6 py-1 rounded-xl font-bold transition-colors flex items-center gap-2 shadow-md ${
                                    !isAnsweredCorrectly
                                    ? 'bg-gray-300 text-gray-500 cursor-not-allowed'
                                    : 'bg-gray-900 text-white hover:bg-black'
                                }`}
                            >
                                <span className="text-xs">{currentQuestionIndex < QUIZ_LIST.length - 1 ? 'ë‹¤ìŒ ë¬¸ì œ (Next)' : 'ê²°ê³¼ ë³´ê¸° (Finish)'}</span>
                                <span className="text-lg">â†’</span>
                            </button>
                        </div>
                    </div>
                </div>
            );
        };
        // --- END OF NEW QUIZ COMPONENT LOGIC ---

        const callGeminiWithBackoff = async (payload) => {
            const apiKey = ""; // Runtime provided
            const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`;
            const delays = [1000, 2000, 4000, 8000, 16000];
            
            for (let i = 0; i <= delays.length; i++) {
                try {
                    const response = await fetch(apiUrl, {
                        method: 'POST',
                        headers: { 'Content-Type': 'application/json' },
                        body: JSON.stringify(payload)
                    });
                    if (!response.ok) {
                        if (response.status === 429 || response.status >= 500) {
                            throw new Error(`Server error: ${response.status}`);
                        }
                        throw new Error(`API error: ${response.statusText}`);
                    }
                    return await response.json();
                } catch (error) {
                    if (i === delays.length) throw error;
                    await new Promise(resolve => setTimeout(resolve, delays[i]));
                }
            }
        };

        const FeedbackSection = ({ value, onChange, placeholder, question, keyPhrases }) => {
            const [feedback, setFeedback] = useState(null);
            const [isLoading, setIsLoading] = useState(false);
            const [error, setError] = useState(null);

            const checkSentence = async () => {
                if (!value || value.trim() === '') {
                    setError("ë¬¸ì¥ì„ ì…ë ¥í•´ì•¼ í”¼ë“œë°±ì„ ë°›ì„ ìˆ˜ ìˆì–´ìš”.");
                    setFeedback(null);
                    return;
                }
                setIsLoading(true);
                setError(null);
                setFeedback(null);

                const systemPrompt = `You are an advanced Korean language tutor AI for A2 level learners. Analyze the user's sentence in response to a specific question.
The user's answer is in Korean.
Your goal is to provide feedback in ENGLISH to help the learner understand.

Instructions:
1. "feedback_message_eng": Write the feedback status or brief comment in English.
2. "explanation_eng": Explain the grammar or vocabulary mistake in English. You can quote Korean words but the explanation must be in English.
3. "corrected_sentence": Provide the natural and correct Korean sentence.
4. "relevance_feedback_eng": If the answer is irrelevant, explain why in English.

Question: "${question}"
User's Answer: "${value}"

Your response MUST be a JSON object with the specified schema.`;
                const payload = {
                    contents: [{ role: "user", parts: [{ text: systemPrompt }, { text: `Please provide feedback on my answer.\n\nQuestion: "${question}"\nUser's Answer: "${value}"` }] }],
                    generationConfig: {
                        responseMimeType: "application/json",
                        responseSchema: { type: "OBJECT", properties: { "is_relevant": { "type": "BOOLEAN" }, "relevance_feedback_eng": { "type": "STRING", "nullable": true }, "is_correct": { "type": "BOOLEAN", "nullable": true }, "feedback_message_eng": { "type": "STRING", "nullable": true }, "corrected_sentence": { "type": "STRING", "nullable": true }, "explanation_eng": { "type": "STRING", "nullable": true }, "alternative_expressions": { "type": "ARRAY", "items": { "type": "OBJECT", "properties": { "expression_kor": { "type": "STRING" }, "expression_eng": { "type": "STRING" } }, "required": ["expression_kor", "expression_eng"] } } }, "required": ["is_relevant"] }
                    }
                };

                try {
                    const result = await callGeminiWithBackoff(payload);
                    if (result.candidates?.[0]?.content?.parts?.[0]?.text) {
                        const parsedJson = JSON.parse(result.candidates[0].content.parts[0].text);
                        setFeedback(parsedJson);
                    } else {
                        setError("AIì˜ ì‘ë‹µì„ ì²˜ë¦¬í•˜ëŠ” ë° ë¬¸ì œê°€ ë°œìƒí–ˆì–´ìš”.");
                    }
                } catch (err) {
                    console.error("Error checking sentence:", err);
                    setError("ë¬¸ì¥ ê²€ì‚¬ì— ì‹¤íŒ¨í–ˆì–´ìš”. ë‹¤ì‹œ ì‹œë„í•´ ì£¼ì„¸ìš”.");
                } finally {
                    setIsLoading(false);
                }
            };

            return (
                <div>
                    {keyPhrases}
                    <div>
                        <h4 className="font-bold text-gray-900 mb-3 text-base">í•µì‹¬ í‘œí˜„ì„ ì‚¬ìš©í•´ì„œ ì§ˆë¬¸ì— ëŒ€ë‹µí•´ ë³´ì„¸ìš”.</h4>
                        <textarea 
                            value={value} 
                            onChange={onChange} 
                            placeholder={placeholder}
                            className="w-full p-4 rounded-xl border border-gray-200 focus:border-green-500 focus:ring-1 focus:ring-green-500 outline-none min-h-[120px] resize-none text-base text-gray-800 placeholder-gray-400 mb-3"
                        ></textarea>
                        
                        <button
                            onClick={checkSentence}
                            disabled={!value.trim() || isLoading}
                            className={`flex items-center gap-2 px-5 py-[6px] text-[12px] leading-[12px] rounded-xl font-bold transition-all shadow-sm ${
                                !value.trim() || isLoading
                                ? 'bg-gray-100 text-gray-400 cursor-not-allowed'
                                : 'bg-indigo-600 text-white hover:bg-indigo-700 hover:shadow-md'
                            }`}
                        >
                            {isLoading ? (
                                <>
                                    <div className="w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"></div>
                                    <span>ë¶„ì„ ì¤‘... (Analyzing)</span>
                                </>
                            ) : (
                                <>
                                    <SparklesIcon className="w-5 h-5" />
                                    <span>AI Feedback (í”¼ë“œë°± ë°›ê¸°)</span>
                                </>
                            )}
                        </button>

                        {error && (
                            <div className="mt-4 p-4 bg-red-50 text-red-600 rounded-xl border border-red-200 text-sm font-medium animate-fade-in">
                                {error}
                            </div>
                        )}

                        {feedback && (
                            <div className={`mt-6 rounded-2xl p-6 border animate-fade-in ${feedback.is_correct ? 'bg-green-50 border-green-200' : 'bg-yellow-50 border-yellow-200'}`}>
                                <div className="flex items-center gap-2 mb-4">
                                    <span className="text-2xl">ğŸ¤–</span>
                                    <h4 className="font-extrabold text-gray-900 text-lg">AI Tutor Feedback</h4>
                                </div>
                                
                                <div className="mb-4">
                                    <span className={`font-black text-sm px-3 py-1 rounded-full bg-white border shadow-sm ${feedback.is_correct ? 'text-green-600 border-green-200' : 'text-yellow-600 border-yellow-200'}`}>
                                        {feedback.is_correct ? 'ğŸ‰ Great Job!' : 'âš ï¸ Needs Improvement'}
                                    </span>
                                </div>

                                <div className="space-y-4">
                                    {feedback.feedback_message_eng && (
                                        <div className="flex flex-col sm:flex-row gap-1 sm:gap-4">
                                            <span className="font-bold text-gray-500 text-sm sm:w-24 shrink-0">Feedback</span>
                                            <p className="text-gray-800 text-sm font-medium leading-relaxed">{feedback.feedback_message_eng}</p>
                                        </div>
                                    )}
                                    {feedback.explanation_eng && (
                                        <div className="flex flex-col sm:flex-row gap-1 sm:gap-4">
                                            <span className="font-bold text-gray-500 text-sm sm:w-24 shrink-0">Explanation</span>
                                            <p className="text-gray-800 text-sm font-medium leading-relaxed">{feedback.explanation_eng}</p>
                                        </div>
                                    )}
                                    {feedback.corrected_sentence && (
                                        <div className="flex flex-col sm:flex-row gap-1 sm:gap-4">
                                            <span className="font-bold text-gray-500 text-sm sm:w-24 shrink-0">Correction</span>
                                            <p className="text-gray-900 text-lg font-black leading-relaxed">{feedback.corrected_sentence}</p>
                                        </div>
                                    )}
                                    {!feedback.is_relevant && (
                                        <div className="flex flex-col sm:flex-row gap-1 sm:gap-4">
                                            <span className="font-bold text-gray-500 text-sm sm:w-24 shrink-0">Relevance</span>
                                            <p className="text-gray-800 text-sm font-medium leading-relaxed">{feedback.relevance_feedback_eng || "This answer doesn't seem relevant to the question."}</p>
                                        </div>
                                    )}
                                </div>
                            </div>
                        )}
                    </div>
                </div>
            );
        };

        const DiscussView = ({ updateProgress }) => {
            
            // ì§ˆë¬¸ë³„ ë‹µë³€ ìƒíƒœ ê´€ë¦¬ë¥¼ ìœ„í•œ í›…
            const [answerStates, setAnswerStates] = useState(
                DISCUSSION_QUESTIONS.reduce((acc, q) => {
                    acc[q.num] = { text: '', showTranslation: false };
                    return acc;
                }, {})
            );
            
            const handleTextChange = (num, newText) => {
                setAnswerStates(prev => ({
                    ...prev,
                    [num]: { ...prev[num], text: newText }
                }));
                updateProgress('discuss', true); // í† ë¡  ì„¹ì…˜ì„ ì™„ë£Œë¡œ í‘œì‹œ
            };
            
            const toggleTranslation = (num) => {
                setAnswerStates(prev => ({
                    ...prev,
                    [num]: { ...prev[num], showTranslation: !prev[num].showTranslation }
                }));
            };
            
            return (
                <div className="max-w-4xl mx-auto animate-fade-in">
                    <div className="flex items-center gap-4 mb-8">
                        <div className="w-16 h-16 bg-[#EFF6FF] rounded-2xl flex items-center justify-center shrink-0">
                            <DiscussHeaderIcon className="w-10 h-10" />
                        </div>
                        <div className="flex flex-col">
                            <h2 className="text-3xl font-black text-gray-900 font-jua">ìƒê°í•´ ë³´ê¸°</h2>
                            <span className="text-base text-gray-500 font-medium">Food For Thought</span>
                        </div>
                    </div>
                    
                    <div className="bg-white rounded-3xl border border-gray-200 shadow-sm p-8 md:p-10 space-y-12">
                        {DISCUSSION_QUESTIONS.map(q => (
                            <div key={q.num} className={`pb-8 ${q.num < DISCUSSION_QUESTIONS.length ? 'border-b border-gray-100' : ''}`}>
                                <div className="mb-8">
                                    <h3 className="text-xl font-bold text-gray-900 mb-2">{q.num}. {q.kor}</h3>
                                    
                                    {answerStates[q.num].showTranslation && (
                                        <p className="text-gray-500 text-sm mb-3 animate-fade-in font-medium">
                                            {q.eng}
                                        </p>
                                    )}

                                    <button 
                                        onClick={() => toggleTranslation(q.num)}
                                        className={`px-3 py-1.5 rounded-lg text-xs font-bold transition-colors inline-flex items-center gap-1 ${answerStates[q.num].showTranslation ? 'bg-gray-200 text-gray-700' : 'bg-gray-100 text-gray-600 hover:bg-gray-200'}`}
                                    >
                                        <TranslateIcon className="w-3 h-3" />
                                        <span>{answerStates[q.num].showTranslation ? 'ë²ˆì—­ ìˆ¨ê¸°ê¸° (Hide)' : 'ë²ˆì—­ (Translation)'}</span>
                                    </button>
                                </div>

                                <FeedbackSection 
                                    question={`${q.num}. ${q.kor}`}
                                    value={answerStates[q.num].text}
                                    onChange={(e) => handleTextChange(q.num, e.target.value)}
                                    placeholder="ì—¬ê¸°ì— ë‹µë³€ì„ ì…ë ¥í•˜ì„¸ìš” (Type your response here)"
                                    keyPhrases={
                                        <div className="mb-6 space-y-3">
                                            <div className="flex items-center gap-2">
                                                <span className="text-red-500 text-lg">ğŸ“</span>
                                                <h4 className="font-bold text-gray-900 text-lg">í•µì‹¬ í‘œí˜„ (Essential phrases)</h4>
                                            </div>

                                            <div className="flex flex-wrap gap-x-6 gap-y-2 pl-1">
                                                {q.vocab.map((v, i) => (
                                                    <div key={i} className="pl-4 border-l-4 border-green-500">
                                                        <p className="text-gray-700">
                                                            <span className="text-green-600 font-bold text-base mr-2">{v.term}:</span>
                                                            <span className="text-sm">{v.meaning_eng}</span>
                                                        </p>
                                                    </div>
                                                ))}
                                            </div>
                                        </div>
                                    }
                                />
                            </div>
                        ))}
                    </div>
                </div>
            );
        };

        const App = () => {
            const [activeTab, setActiveTab] = useState('home');
            const [isSidebarCollapsed, setIsSidebarCollapsed] = useState(false);
            const [userLevel, setUserLevel] = useState("A2+"); // Default level fixed to A2+ (Upper Beginner)
            
            const [progress, setProgress] = useState({
                learn: false,
                vocab: false,
                quiz: 0,
                discuss: false
            });

            const updateProgress = (key, value = true) => {
                setProgress(prev => {
                    if (prev[key] === value) return prev;
                    return { ...prev, [key]: value };
                });
            };

            useEffect(() => {
                const handleResize = () => {
                    if (window.innerWidth < 1024) {
                        setIsSidebarCollapsed(true);
                    } else {
                        setIsSidebarCollapsed(false);
                    }
                };
                window.addEventListener('resize', handleResize);
                handleResize(); 
                return () => window.removeEventListener('resize', handleResize);
            }, []);

            const toggleSidebar = () => {
                setIsSidebarCollapsed(!isSidebarCollapsed);
            };

            const renderMobileIcon = (tab) => {
                switch(tab) {
                    case 'home': return <HomeIcon className="w-6 h-6"/>;
                    case 'learn': return <LearnIcon className="w-6 h-6"/>;
                    case 'vocab': return <VocabIcon className="w-6 h-6"/>;
                    case 'quiz': return <QuizIcon className="w-6 h-6"/>;
                    case 'discuss': return <DiscussIcon className="w-6 h-6"/>;
                    default: return null;
                }
            };

            const renderContent = () => {
                switch(activeTab) {
                    case 'home': return <HomeView setActiveTab={setActiveTab} progress={progress} userLevel={userLevel} />;
                    case 'learn': return <LearnView updateProgress={updateProgress} />;
                    case 'vocab': return <VocabView updateProgress={updateProgress} />;
                    case 'quiz': return <QuizView updateProgress={updateProgress} />;
                    case 'discuss': return <DiscussView updateProgress={updateProgress} />;
                    default: return <HomeView setActiveTab={setActiveTab} progress={progress} userLevel={userLevel} />;
                }
            };

            return (
                <div className="flex min-h-screen bg-[#f9fafb]">
                    <Sidebar 
                        activeTab={activeTab} 
                        setActiveTab={setActiveTab} 
                        isCollapsed={isSidebarCollapsed} 
                        toggleSidebar={toggleSidebar}
                        userLevel={userLevel}
                        // setUserLevel removed as level is fixed for this content
                    />
                    <div className={`flex-1 flex flex-col transition-all duration-300 ease-in-out ${isSidebarCollapsed ? 'md:ml-[88px]' : 'md:ml-64'}`}>
                        <header className={`h-16 bg-white sticky top-0 z-40 transition-all duration-300 ${isSidebarCollapsed ? 'md:left-[88px]' : 'md:left-64'}`}></header>
                        <main className="flex-1 p-4 overflow-hidden flex flex-col">{renderContent()}</main>
                    </div>
                    <nav className="md:hidden fixed bottom-0 w-full bg-white border-t border-gray-200 flex justify-around p-3 z-50">
                        {['home','learn','vocab','quiz','discuss'].map(t=><button key={t} onClick={()=>setActiveTab(t)} className={`p-2 rounded-lg ${activeTab===t?'text-green-600 bg-green-50':'text-gray-400'}`}>{renderMobileIcon(t)}</button>)}
                    </nav>
                </div>
            );
        };
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>
